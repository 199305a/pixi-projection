{"version":3,"file":"pixi-projection.js","sources":["../../src/base/AbstractProjection.ts","../../src/constants.ts","../../src/base/LinearProjection.ts","../../src/base/webgl/Sprite2dRenderer.ts","../../src/base/webgl/UniformBatchRenderer.ts","../../src/curve/BaseSurface.ts","../../src/curve/BilinearSurface.ts","../../src/curve/ProjectionSurface.ts","../../src/curve/Container2s.ts","../../src/curve/sprites/Sprite2s.ts","../../src/curve/sprites/Text2s.ts","../../src/proj2d/Matrix2d.ts","../../src/utils.ts","../../src/proj2d/Projection2d.ts","../../src/curve/sprites/convert.ts","../../src/curve/SpriteBilinearRenderer.ts","../../src/proj2d/Container2d.ts","../../src/proj2d/mesh/Mesh2d.ts","../../src/proj2d/sprites/Sprite2d.ts","../../src/proj2d/sprites/Text2d.ts","../../src/proj2d/tiling/TilingSprite2d.ts","../../src/proj2d/z_masks/SpriteMaskFilter.ts","../../src/proj2d/sprites/convert.ts","../../src/proj2d/tiling/TilingSprite2dRenderer.ts","../../src/proj2d/z_masks/MaskHacker.ts","../../src/proj3d/Point3d.ts","../../src/proj3d/Matrix3d.ts","../../src/proj3d/Euler.ts","../../src/proj3d/ObservableEuler.ts","../../src/proj3d/Projection3d.ts","../../src/proj3d/Container3d.ts","../../src/proj3d/Camera3d.ts","../../src/proj3d/mesh/Mesh3d2d.ts","../../src/proj3d/sprites/Sprite3d.ts","../../src/proj3d/sprites/Text3d.ts","../../src/proj3d/sprites/convert.ts","../../integration-spine/Spine2d.ts","../../integration-spine/Spine3d.ts"],"sourcesContent":["import { Transform } from '@pixi/math';\n\nexport class ProjectedTransform extends Transform {\n\tproj: AbstractProjection;\n}\n\nexport class AbstractProjection {\n\tlegacy: ProjectedTransform;\n\n\tprotected _enabled: boolean = false;\n\n\tconstructor(legacy: Transform, enable: boolean = true) {\n\t\tthis.legacy = legacy as ProjectedTransform;\n\n\t\tif (enable) {\n\t\t\tthis.enabled = true;\n\t\t}\n\n\t\t// sorry for hidden class, it would be good to have special projection field in official pixi\n\t\tthis.legacy.proj = this;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value: boolean) {\n\t\tthis._enabled = value;\n\t}\n\n\tclear() {\n\t}\n}","export enum AFFINE {\n\tNONE = 0,\n\tFREE = 1,\n\tAXIS_X = 2,\n\tAXIS_Y = 3,\n\tPOINT = 4,\n\tAXIS_XR = 5\n}\n\nexport enum TRANSFORM_STEP {\n\tNONE = 0,\n\t// POS = 1,\n\t// ROT = 2,\n\t// SCALE = 3,\n\t// PIVOT = 4,\n\tBEFORE_PROJ = 4,\n\tPROJ = 5,\n\t// POS_2 = 6,\n\t// ROT_2 = 7,\n\t// SCALE_2 = 8,\n\t// PIVOT_2 = 9,\n\tALL = 9\n}","/// <reference path=\"../types.d.ts\" />\n\nimport { AFFINE } from '../constants';\nimport { AbstractProjection } from './AbstractProjection';\nimport { Transform } from '@pixi/math';\n\nimport type { Matrix } from '@pixi/math';\nimport type { ProjectedTransform } from './AbstractProjection';\nimport type { Projection2d } from '../proj2d/Projection2d';\n\nfunction transformHack(this: ProjectedTransform, parentTransform: ProjectedTransform) {\n\t// implementation here\n\tconst proj = this.proj as LinearProjection<any>;\n\tconst ta = this as any;\n\tconst pwid = (parentTransform as any)._worldID;\n\n\tconst lt = ta.localTransform;\n\tconst scaleAfterAffine = proj.scaleAfterAffine && proj.affine >= 2;\n\n\t//this part is copied from\n\tif (ta._localID !== ta._currentLocalID) {\n\t\t// get the matrix values of the displayobject based on its transform properties..\n\t\tif (scaleAfterAffine) {\n\t\t\tlt.a = ta._cx;\n\t\t\tlt.b = ta._sx;\n\t\t\tlt.c = ta._cy;\n\t\t\tlt.d = ta._sy;\n\n\t\t\tlt.tx = ta.position._x;\n\t\t\tlt.ty = ta.position._y;\n\t\t} else {\n\t\t\tlt.a = ta._cx * ta.scale._x;\n\t\t\tlt.b = ta._sx * ta.scale._x;\n\t\t\tlt.c = ta._cy * ta.scale._y;\n\t\t\tlt.d = ta._sy * ta.scale._y;\n\n\t\t\tlt.tx = ta.position._x - ((ta.pivot._x * lt.a) + (ta.pivot._y * lt.c));\n\t\t\tlt.ty = ta.position._y - ((ta.pivot._x * lt.b) + (ta.pivot._y * lt.d));\n\t\t}\n\n\t\tta._currentLocalID = ta._localID;\n\n\t\t// force an update..\n\t\tproj._currentProjID = -1;\n\t}\n\n\tconst _matrixID = proj._projID;\n\tif (proj._currentProjID !== _matrixID) {\n\t\tproj._currentProjID = _matrixID;\n\t\tproj.updateLocalTransform(lt);\n\t\tta._parentID = -1;\n\t}\n\n\tif (ta._parentID !== pwid) {\n\t\tconst pp = parentTransform.proj as Projection2d;\n\t\tif (pp && !pp._affine) {\n\t\t\tproj.world.setToMult(pp.world, proj.local);\n\t\t} else {\n\t\t\tproj.world.setToMultLegacy(parentTransform.worldTransform, proj.local);\n\t\t}\n\n\t\tlet wa = ta.worldTransform;\n\n\t\tproj.world.copyTo(wa, proj._affine, proj.affinePreserveOrientation);\n\n\t\tif (scaleAfterAffine) {\n\t\t\twa.a *= ta.scale._x;\n\t\t\twa.b *= ta.scale._x;\n\t\t\twa.c *= ta.scale._y;\n\t\t\twa.d *= ta.scale._y;\n\n\t\t\twa.tx -= ((ta.pivot._x * wa.a) + (ta.pivot._y * wa.c));\n\t\t\twa.ty -= ((ta.pivot._x * wa.b) + (ta.pivot._y * wa.d));\n\t\t}\n\t\tta._parentID = pwid;\n\t\tta._worldID++;\n\t}\n}\n\nexport class LinearProjection<T> extends AbstractProjection { \n\t_projID = 0;\n\t_currentProjID = -1;\n\t_affine = AFFINE.NONE;\n\taffinePreserveOrientation = false;\n\tscaleAfterAffine = true;\n\n\tupdateLocalTransform(lt: Matrix) {\n\n\t}\n\n\tset affine(value: AFFINE) {\n\t\tif (this._affine == value) return;\n\t\tthis._affine = value;\n\t\tthis._currentProjID = -1;\n\t\t// this is because scaleAfterAffine\n\t\t(this.legacy as any)._currentLocalID = -1;\n\t}\n\n\tget affine() {\n\t\treturn this._affine;\n\t}\n\n\tlocal: T;\n\tworld: T;\n\n\tset enabled(value: boolean) {\n\t\tif (value === this._enabled) {\n\t\t\treturn;\n\t\t}\n\t\tthis._enabled = value;\n\t\tif (value) {\n\t\t\tthis.legacy.updateTransform = transformHack;\n\t\t\t(this.legacy as any)._parentID = -1;\n\t\t} else {\n\t\t\tthis.legacy.updateTransform = Transform.prototype.updateTransform;\n\t\t\t(this.legacy as any)._parentID = -1;\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis._currentProjID = -1;\n\t\tthis._projID = 0;\n\t}\n}","/// <reference path=\"../../types.d.ts\" />\n\nimport { \n\tAbstractBatchRenderer, \n\tBatchShaderGenerator,\n\tBuffer, \n\tGeometry, \n\tRenderer, \n\tViewableBuffer \n} from '@pixi/core';\nimport { TYPES } from '@pixi/constants';\nimport { premultiplyTint } from '@pixi/utils';\nimport shaderVert from './sprite2d.vert';\nimport shaderFrag from './sprite2d.frag';\n\nexport class Batch3dGeometry extends Geometry\n{\n\t_buffer: Buffer;\n\t_indexBuffer : Buffer;\n\n\tconstructor(_static = false)\n\t{\n\t\tsuper();\n\n\t\tthis._buffer = new Buffer(null, _static, false);\n\n\t\tthis._indexBuffer = new Buffer(null, _static, true);\n\n\t\tthis.addAttribute('aVertexPosition', this._buffer, 3, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aTextureCoord', this._buffer, 2, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aColor', this._buffer, 4, true, TYPES.UNSIGNED_BYTE)\n\t\t\t.addAttribute('aTextureId', this._buffer, 1, true, TYPES.FLOAT)\n\t\t\t.addIndex(this._indexBuffer);\n\t}\n}\n\nexport class Batch2dPluginFactory {\n\tstatic create(options: any): any\n\t{\n\t\tconst { vertex, fragment, vertexSize, geometryClass } = (Object as any).assign({\n\t\t\tvertex: shaderVert,\n\t\t\tfragment: shaderFrag,\n\t\t\tgeometryClass: Batch3dGeometry,\n\t\t\tvertexSize: 7,\n\t\t}, options);\n\n\t\treturn class BatchPlugin extends AbstractBatchRenderer\n\t\t{\n\t\t\tconstructor(renderer: Renderer)\n\t\t\t{\n\t\t\t\tsuper(renderer);\n\n\t\t\t\tthis.shaderGenerator = new BatchShaderGenerator(vertex, fragment);\n\t\t\t\tthis.geometryClass = geometryClass;\n\t\t\t\tthis.vertexSize = vertexSize;\n\t\t\t}\n\n\t\t\tvertexSize: number;\n\n\t\t\tpackInterleavedGeometry(element: any, attributeBuffer: ViewableBuffer, indexBuffer: Uint16Array, aIndex: number, iIndex: number)\n\t\t\t{\n\t\t\t\tconst {\n\t\t\t\t\tuint32View,\n\t\t\t\t\tfloat32View,\n\t\t\t\t} = attributeBuffer;\n\n\t\t\t\tconst p = aIndex / this.vertexSize;// float32View.length / 6 / 2;\n\t\t\t\tconst uvs = element.uvs;\n\t\t\t\tconst indices = element.indices;// geometry.getIndex().data;// indicies;\n\t\t\t\tconst vertexData = element.vertexData;\n\t\t\t\tconst vertexData2d = element.vertexData2d;\n\t\t\t\tconst textureId = element._texture.baseTexture._batchLocation;\n\n\t\t\t\tconst alpha = Math.min(element.worldAlpha, 1.0);\n\n\t\t\t\tconst argb = alpha < 1.0 && element._texture.baseTexture.alphaMode ? premultiplyTint(element._tintRGB, alpha)\n\t\t\t\t\t: element._tintRGB + (alpha * 255 << 24);\n\n\t\t\t\tif (vertexData2d) {\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor (let i = 0; i < vertexData2d.length; i += 3, j += 2)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat32View[aIndex++] = vertexData2d[i];\n\t\t\t\t\t\tfloat32View[aIndex++] = vertexData2d[i + 1];\n\t\t\t\t\t\tfloat32View[aIndex++] = vertexData2d[i + 2];\n\t\t\t\t\t\tfloat32View[aIndex++] = uvs[j];\n\t\t\t\t\t\tfloat32View[aIndex++] = uvs[j + 1];\n\t\t\t\t\t\tuint32View[aIndex++] = argb;\n\t\t\t\t\t\tfloat32View[aIndex++] = textureId;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = 0; i < vertexData.length; i += 2)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat32View[aIndex++] = vertexData[i];\n\t\t\t\t\t\tfloat32View[aIndex++] = vertexData[i + 1];\n\t\t\t\t\t\tfloat32View[aIndex++] = 1.0;\n\t\t\t\t\t\tfloat32View[aIndex++] = uvs[i];\n\t\t\t\t\t\tfloat32View[aIndex++] = uvs[i + 1];\n\t\t\t\t\t\tuint32View[aIndex++] = argb;\n\t\t\t\t\t\tfloat32View[aIndex++] = textureId;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < indices.length; i++)\n\t\t\t\t{\n\t\t\t\t\tindexBuffer[iIndex++] = p + indices[i];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\nRenderer.registerPlugin('batch2d', Batch2dPluginFactory.create({}));\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { AbstractBatchRenderer, BatchTextureArray, ViewableBuffer } from '@pixi/core';\nimport { Sprite } from '@pixi/sprite';\nimport { premultiplyBlendMode } from '@pixi/utils';\n\nexport class UniformBatchRenderer extends AbstractBatchRenderer {\n\t_iIndex: number;\n\t_aIndex: number;\n\t_dcIndex: number;\n\t_bufferedElements: Array<any>;\n\t_attributeBuffer: ViewableBuffer;\n\t_indexBuffer: Uint16Array;\n\tvertexSize: number;\n\tforceMaxTextures = 0;\n\n\tgetUniforms(sprite: Sprite): any {\n\t\treturn this.defUniforms;\n\t}\n\n\tsyncUniforms(obj: any) {\n\t\tif (!obj) return;\n\t\tlet sh = this._shader;\n\t\tfor (let key in obj) {\n\t\t\tsh.uniforms[key] = obj[key];\n\t\t}\n\t}\n\n\tdefUniforms = {};\n\n\tbuildDrawCalls(texArray: BatchTextureArray, start: number, finish: number)\n\t{\n\t\tconst thisAny = this as any;\n\n\t\tconst {\n\t\t\t_bufferedElements: elements,\n\t\t\t_attributeBuffer,\n\t\t\t_indexBuffer,\n\t\t\tvertexSize,\n\t\t} = this;\n\t\tconst drawCalls = AbstractBatchRenderer._drawCallPool;\n\n\t\tlet dcIndex: number = this._dcIndex;\n\t\tlet aIndex: number = this._aIndex;\n\t\tlet iIndex: number = this._iIndex;\n\n\t\tlet drawCall = drawCalls[dcIndex] as any;\n\n\t\tdrawCall.start = this._iIndex;\n\t\tdrawCall.texArray = texArray;\n\n\t\tfor (let i = start; i < finish; ++i)\n\t\t{\n\t\t\tconst sprite = elements[i];\n\t\t\tconst tex = sprite._texture.baseTexture;\n\t\t\tconst spriteBlendMode = premultiplyBlendMode[\n\t\t\t\ttex.alphaMode ? 1 : 0][sprite.blendMode];\n\t\t\tconst uniforms = this.getUniforms(sprite);\n\n\t\t\telements[i] = null;\n\n\t\t\t// here is the difference\n\t\t\tif (start < i && (drawCall.blend !== spriteBlendMode || drawCall.uniforms !== uniforms))\n\t\t\t{\n\t\t\t\tdrawCall.size = iIndex - drawCall.start;\n\t\t\t\tstart = i;\n\t\t\t\tdrawCall = drawCalls[++dcIndex];\n\t\t\t\tdrawCall.texArray = texArray;\n\t\t\t\tdrawCall.start = iIndex;\n\t\t\t}\n\n\t\t\tthis.packInterleavedGeometry(sprite, _attributeBuffer, _indexBuffer, aIndex, iIndex);\n\t\t\taIndex += sprite.vertexData.length / 2 * vertexSize;\n\t\t\tiIndex += sprite.indices.length;\n\n\t\t\tdrawCall.blend = spriteBlendMode;\n\t\t\t// here is the difference\n\t\t\tdrawCall.uniforms = uniforms;\n\t\t}\n\n\t\tif (start < finish)\n\t\t{\n\t\t\tdrawCall.size = iIndex - drawCall.start;\n\t\t\t++dcIndex;\n\t\t}\n\n\t\tthisAny._dcIndex = dcIndex;\n\t\tthisAny._aIndex = aIndex;\n\t\tthisAny._iIndex = iIndex;\n\t}\n\n\tdrawBatches() {\n\t\tconst dcCount = this._dcIndex;\n\t\tconst {gl, state: stateSystem, shader: shaderSystem} = this.renderer;\n\t\tconst drawCalls = AbstractBatchRenderer._drawCallPool;\n\t\tlet curUniforms: any = null;\n\t\tlet curTexArray: BatchTextureArray = null;\n\n\t\tfor (let i = 0; i < dcCount; i++) {\n\t\t\tconst {texArray, type, size, start, blend, uniforms} = drawCalls[i] as any;\n\n\t\t\tif (curTexArray !== texArray) {\n\t\t\t\tcurTexArray = texArray;\n\t\t\t\tthis.bindAndClearTexArray(texArray);\n\t\t\t}\n\t\t\t// here is the difference\n\t\t\tif (curUniforms !== uniforms) {\n\t\t\t\tcurUniforms = uniforms;\n\t\t\t\tthis.syncUniforms(uniforms);\n\t\t\t\t(shaderSystem as any).syncUniformGroup((this._shader as any).uniformGroup);\n\t\t\t}\n\n\t\t\tthis.state.blendMode = blend;\n\t\t\tstateSystem.set(this.state);\n\t\t\tgl.drawElements(type, size, gl.UNSIGNED_SHORT, start * 2);\n\t\t}\n\t}\n\n\tcontextChange()\n\t{\n\t\tif (!this.forceMaxTextures) {\n\t\t\tsuper.contextChange();\n\t\t\tthis.syncUniforms(this.defUniforms);\n\t\t\treturn;\n\t\t}\n\n\t\t// we can override MAX_TEXTURES with this hack\n\n\t\tconst gl = this.renderer.gl;\n\t\tconst thisAny = this as any;\n\n\t\tthisAny.MAX_TEXTURES = this.forceMaxTextures;\n\t\tthis._shader = thisAny.shaderGenerator.generateShader(this.MAX_TEXTURES);\n\t\tthis.syncUniforms(this.defUniforms);\n\t\tfor (let i = 0; i < thisAny._packedGeometryPoolSize; i++)\n\t\t{\n\t\t\t/* eslint-disable max-len */\n\t\t\tthisAny._packedGeometries[i] = new (this.geometryClass)();\n\t\t}\n\t\tthis.initFlushBuffers();\n\t}\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Matrix, Point } from '@pixi/math';\n\nimport type { IPoint } from '@pixi/math';\nimport type { IWorldTransform } from './ProjectionSurface';\n\nconst p = [new Point(), new Point(), new Point(), new Point()];\nconst a = [0, 0, 0, 0];\n\nexport abstract class Surface implements IWorldTransform {\n\tsurfaceID = \"default\";\n\n\t_updateID: number = 0;\n\n\tvertexSrc: string = \"\";\n\tfragmentSrc: string = \"\";\n\n\tfillUniforms(uniforms: any) {\n\n\t}\n\n\tclear() {\n\n\t}\n\n\t/**\n\t * made for bilinear, other things will need adjustments, like test if (0) is inside\n\t * @param {ArrayLike<number>} v\n\t * @param out\n\t * @param {Matrix} after\n\t */\n\tboundsQuad(v: ArrayLike<number>, out: any, after?: Matrix) {\n\t\tlet minX = out[0], minY = out[1];\n\t\tlet maxX = out[0], maxY = out[1];\n\t\tfor (let i = 2; i < 8; i += 2) {\n\t\t\tif (minX > out[i]) minX = out[i];\n\t\t\tif (maxX < out[i]) maxX = out[i];\n\t\t\tif (minY > out[i + 1]) minY = out[i + 1];\n\t\t\tif (maxY < out[i + 1]) maxY = out[i + 1];\n\t\t}\n\n\t\tp[0].set(minX, minY);\n\t\tthis.apply(p[0], p[0]);\n\t\tp[1].set(maxX, minY);\n\t\tthis.apply(p[1], p[1]);\n\t\tp[2].set(maxX, maxY);\n\t\tthis.apply(p[2], p[2]);\n\t\tp[3].set(minX, maxY);\n\t\tthis.apply(p[3], p[3]);\n\n\t\tif (after) {\n\t\t\tafter.apply(p[0], p[0]);\n\t\t\tafter.apply(p[1], p[1]);\n\t\t\tafter.apply(p[2], p[2]);\n\t\t\tafter.apply(p[3], p[3]);\n\t\t\tout[0] = p[0].x;\n\t\t\tout[1] = p[0].y;\n\t\t\tout[2] = p[1].x;\n\t\t\tout[3] = p[1].y;\n\t\t\tout[4] = p[2].x;\n\t\t\tout[5] = p[2].y;\n\t\t\tout[6] = p[3].x;\n\t\t\tout[7] = p[3].y;\n\t\t} else {\n\t\t\tfor (let i = 1; i <= 3; i++) {\n\t\t\t\tif (p[i].y < p[0].y || p[i].y == p[0].y && p[i].x < p[0].x) {\n\t\t\t\t\tlet t = p[0];\n\t\t\t\t\tp[0] = p[i];\n\t\t\t\t\tp[i] = t;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let i = 1; i <= 3; i++) {\n\t\t\t\ta[i] = Math.atan2(p[i].y - p[0].y, p[i].x - p[0].x);\n\t\t\t}\n\t\t\tfor (let i = 1; i <= 3; i++) {\n\t\t\t\tfor (let j = i + 1; j <= 3; j++) {\n\t\t\t\t\tif (a[i] > a[j]) {\n\t\t\t\t\t\tlet t = p[i];\n\t\t\t\t\t\tp[i] = p[j];\n\t\t\t\t\t\tp[j] = t;\n\t\t\t\t\t\tlet t2 = a[i];\n\t\t\t\t\t\ta[i] = a[j];\n\t\t\t\t\t\ta[j] = t2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tout[0] = p[0].x;\n\t\t\tout[1] = p[0].y;\n\t\t\tout[2] = p[1].x;\n\t\t\tout[3] = p[1].y;\n\t\t\tout[4] = p[2].x;\n\t\t\tout[5] = p[2].y;\n\t\t\tout[6] = p[3].x;\n\t\t\tout[7] = p[3].y;\n\n\t\t\tif ((p[3].x - p[2].x) * (p[1].y - p[2].y) - (p[1].x - p[2].x) * (p[3].y - p[2].y) < 0) {\n\t\t\t\t//triangle!!!\n\t\t\t\tout[4] = p[3].x;\n\t\t\t\tout[5] = p[3].y;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tabstract apply(pos: IPoint, newPos: IPoint): IPoint;\n\n\t//TODO: remove props\n\tabstract applyInverse(pos: IPoint, newPos: IPoint): IPoint;\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Matrix, Point, Rectangle, Transform } from '@pixi/math';\nimport { Surface } from './BaseSurface';\nimport { Sprite } from '@pixi/sprite';\n\nimport type { IPoint } from '@pixi/math';\n\nconst tempMat = new Matrix();\nconst tempRect = new Rectangle();\nconst tempPoint = new Point();\n\nexport class BilinearSurface extends Surface {\n\tdistortion = new Point();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tclear() {\n\t\tthis.distortion.set(0, 0);\n\t}\n\n\tapply(pos: IPoint, newPos?: IPoint): IPoint {\n\t\tnewPos = newPos || new Point();\n\t\tconst d = this.distortion;\n\t\tconst m = pos.x * pos.y;\n\t\tnewPos.x = pos.x + d.x * m;\n\t\tnewPos.y = pos.y + d.y * m;\n\t\treturn newPos;\n\t}\n\n\tapplyInverse(pos: IPoint, newPos: IPoint): IPoint {\n\t\tnewPos = newPos || new Point();\n\t\tconst vx = pos.x, vy = pos.y;\n\t\tconst dx = this.distortion.x, dy = this.distortion.y;\n\n\t\tif (dx == 0.0) {\n\t\t\tnewPos.x = vx;\n\t\t\tnewPos.y = vy / (1.0 + dy * vx);\n\t\t} else\n\t\tif (dy == 0.0) {\n\t\t\tnewPos.y = vy;\n\t\t\tnewPos.x = vx/ (1.0 + dx * vy);\n\t\t} else {\n\t\t\tconst b = (vy * dx - vx * dy + 1.0) * 0.5 / dy;\n\t\t\tconst d = b * b + vx / dy;\n\n\t\t\tif (d <= 0.00001) {\n\t\t\t\tnewPos.set(NaN, NaN);\n\t\t\t\treturn newPos;\n\t\t\t}\n\t\t\tif (dy > 0.0) {\n\t\t\t\tnewPos.x = - b + Math.sqrt(d);\n\t\t\t} else {\n\t\t\t\tnewPos.x = - b - Math.sqrt(d);\n\t\t\t}\n\t\t\tnewPos.y = (vx / newPos.x - 1.0) / dx;\n\t\t}\n\t\treturn newPos;\n\t}\n\n\tmapSprite(sprite: Sprite, quad: Array<IPoint>, outTransform?: Transform) {\n\t\tconst tex = sprite.texture;\n\n\t\ttempRect.x = -sprite.anchor.x * tex.orig.width;\n\t\ttempRect.y = -sprite.anchor.y * tex.orig.height;\n\t\ttempRect.width = tex.orig.width;\n\t\ttempRect.height = tex.orig.height;\n\n\t\treturn this.mapQuad(tempRect, quad, outTransform || sprite.transform as Transform);\n\t}\n\n\tmapQuad(rect: Rectangle, quad: Array<IPoint>, outTransform: Transform) {\n\t\tconst ax = -rect.x / rect.width;\n\t\tconst ay = -rect.y / rect.height;\n\n\t\tconst ax2 = (1.0 - rect.x) / rect.width;\n\t\tconst ay2 = (1.0 - rect.y) / rect.height;\n\n\t\tconst up1x = (quad[0].x * (1.0 - ax) + quad[1].x * ax);\n\t\tconst up1y = (quad[0].y * (1.0 - ax) + quad[1].y * ax);\n\t\tconst up2x = (quad[0].x * (1.0 - ax2) + quad[1].x * ax2);\n\t\tconst up2y = (quad[0].y * (1.0 - ax2) + quad[1].y * ax2);\n\n\t\tconst down1x = (quad[3].x * (1.0 - ax) + quad[2].x * ax);\n\t\tconst down1y = (quad[3].y * (1.0 - ax) + quad[2].y * ax);\n\t\tconst down2x = (quad[3].x * (1.0 - ax2) + quad[2].x * ax2);\n\t\tconst down2y = (quad[3].y * (1.0 - ax2) + quad[2].y * ax2);\n\n\t\tconst x00 = up1x * (1.0 - ay) + down1x * ay;\n\t\tconst y00 = up1y * (1.0 - ay) + down1y * ay;\n\n\t\tconst x10 = up2x * (1.0 - ay) + down2x * ay;\n\t\tconst y10 = up2y * (1.0 - ay) + down2y * ay;\n\n\t\tconst x01 = up1x * (1.0 - ay2) + down1x * ay2;\n\t\tconst y01 = up1y * (1.0 - ay2) + down1y * ay2;\n\n\t\tconst x11 = up2x * (1.0 - ay2) + down2x * ay2;\n\t\tconst y11 = up2y * (1.0 - ay2) + down2y * ay2;\n\n\t\tconst mat = tempMat;\n\t\tmat.tx = x00;\n\t\tmat.ty = y00;\n\t\tmat.a = x10 - x00;\n\t\tmat.b = y10 - y00;\n\t\tmat.c = x01 - x00;\n\t\tmat.d = y01 - y00;\n\t\ttempPoint.set(x11, y11);\n\t\tmat.applyInverse(tempPoint, tempPoint);\n\t\tthis.distortion.set(tempPoint.x - 1, tempPoint.y - 1);\n\n\t\toutTransform.setFromMatrix(mat);\n\n\t\treturn this;\n\t}\n\n\tfillUniforms(uniforms: any) {\n\t\tuniforms.distortion = uniforms.distortion || new Float32Array([0, 0, 0, 0]);\n\t\tconst ax = Math.abs(this.distortion.x);\n\t\tconst ay = Math.abs(this.distortion.y);\n\n\t\tuniforms.distortion[0] = ax * 10000 <= ay ? 0 : this.distortion.x;\n\t\tuniforms.distortion[1] = ay * 10000 <= ax ? 0 : this.distortion.y;\n\t\tuniforms.distortion[2] = 1.0 / uniforms.distortion[0];\n\t\tuniforms.distortion[3] = 1.0 / uniforms.distortion[1];\n\t}\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { AbstractProjection } from '../base/AbstractProjection';\nimport { BilinearSurface } from './BilinearSurface';\nimport { Sprite } from '@pixi/sprite';\nimport { Surface } from './BaseSurface';\nimport { Transform } from '@pixi/math';\n\nimport type { IPoint } from '@pixi/math';\nimport type { ProjectedTransform } from '../base/AbstractProjection';\n\nconst fun = Transform.prototype.updateTransform;\n\nexport interface IWorldTransform {\n\tapply(pos: IPoint, newPos: IPoint): IPoint;\n\n\t//TODO: remove props\n\tapplyInverse(pos: IPoint, newPos: IPoint): IPoint;\n}\n\nfunction transformHack(this: ProjectedTransform, parentTransform: ProjectedTransform): IWorldTransform {\n\tconst proj = this.proj as ProjectionSurface;\n\n\tconst pp = parentTransform.proj as ProjectionSurface;\n\tconst ta = this as any;\n\n\tif (!pp) {\n\t\tfun.call(this, parentTransform);\n\t\tproj._activeProjection = null;\n\t\treturn;\n\t}\n\n\tif (pp._surface) {\n\t\tproj._activeProjection = pp;\n\t\tthis.updateLocalTransform();\n\t\tthis.localTransform.copyTo(this.worldTransform);\n\t\tif (ta._parentID < 0) {\n\t\t\t++ta._worldID;\n\t\t}\n\t\treturn;\n\t}\n\n\tfun.call(this, parentTransform);\n\tproj._activeProjection = pp._activeProjection;\n}\n\nexport class ProjectionSurface extends AbstractProjection {\n\tconstructor(legacy: Transform, enable?: boolean) {\n\t\tsuper(legacy, enable);\n\t}\n\n\t_surface: Surface = null;\n\t_activeProjection: ProjectionSurface = null;\n\n\tset enabled(value: boolean) {\n\t\tif (value === this._enabled) {\n\t\t\treturn;\n\t\t}\n\t\tthis._enabled = value;\n\t\tif (value) {\n\t\t\tthis.legacy.updateTransform = transformHack;\n\t\t\t(this.legacy as any)._parentID = -1;\n\t\t} else {\n\t\t\tthis.legacy.updateTransform = Transform.prototype.updateTransform;\n\t\t\t(this.legacy as any)._parentID = -1;\n\t\t}\n\t}\n\n\tget surface() {\n\t\treturn this._surface;\n\t}\n\n\tset surface(value: Surface) {\n\t\tif (this._surface == value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._surface = value || null;\n\t\t(this.legacy as any)._parentID = -1;\n\t}\n\n\tapplyPartial(pos: IPoint, newPos?: IPoint): IPoint {\n\t\tif (this._activeProjection !== null) {\n\t\t\tnewPos = this.legacy.worldTransform.apply(pos as any, newPos as any);\n\t\t\treturn this._activeProjection.surface.apply(newPos, newPos);\n\t\t}\n\t\tif (this._surface !== null) {\n\t\t\treturn this.surface.apply(pos, newPos);\n\t\t}\n\t\treturn this.legacy.worldTransform.apply(pos as any, newPos as any);\n\t}\n\n\tapply(pos: IPoint, newPos?: IPoint): IPoint {\n\t\tif (this._activeProjection !== null) {\n\t\t\tnewPos = this.legacy.worldTransform.apply(pos as any, newPos as any);\n\t\t\tthis._activeProjection.surface.apply(newPos, newPos);\n\t\t\treturn this._activeProjection.legacy.worldTransform.apply(newPos as any, newPos as any);\n\t\t}\n\t\tif (this._surface !== null) {\n\t\t\tnewPos = this.surface.apply(pos, newPos);\n\t\t\treturn this.legacy.worldTransform.apply(newPos as any, newPos as any);\n\t\t}\n\t\treturn this.legacy.worldTransform.apply(pos as any, newPos as any);\n\t}\n\n\tapplyInverse(pos: IPoint, newPos: IPoint) {\n\t\tif (this._activeProjection !== null) {\n\t\t\tnewPos = this._activeProjection.legacy.worldTransform.applyInverse(pos as any, newPos as any);\n\t\t\tthis._activeProjection._surface.applyInverse(newPos, newPos);\n\t\t\treturn this.legacy.worldTransform.applyInverse(newPos as any, newPos as any);\n\t\t}\n\t\tif (this._surface !== null) {\n\t\t\tnewPos = this.legacy.worldTransform.applyInverse(pos as any, newPos as any);\n\t\t\treturn this._surface.applyInverse(newPos, newPos);\n\t\t}\n\t\treturn this.legacy.worldTransform.applyInverse(pos as any, newPos as any);\n\t}\n\n\tmapBilinearSprite(sprite: Sprite, quad: Array<IPoint>) {\n\t\tif (!(this._surface instanceof BilinearSurface)) {\n\t\t\tthis.surface = new BilinearSurface();\n\t\t}\n\t\t(this.surface as BilinearSurface).mapSprite(sprite, quad, this.legacy);\n\t}\n\n\t_currentSurfaceID = -1;\n\t_currentLegacyID = -1;\n\t_lastUniforms : any = null;\n\n\tclear() {\n\t\tif (this.surface) {\n\t\t\tthis.surface.clear();\n\t\t}\n\t}\n\n\tget uniforms(): any {\n\t\tif (this._currentLegacyID === (this.legacy as any)._worldID &&\n\t\t\tthis._currentSurfaceID === this.surface._updateID) {\n\n\t\t\treturn this._lastUniforms;\n\t\t}\n\n\t\tthis._lastUniforms = this._lastUniforms || {};\n\t\tthis._lastUniforms.translationMatrix = this.legacy.worldTransform;\n\t\tthis._surface.fillUniforms(this._lastUniforms);\n\t\treturn this._lastUniforms;\n\t}\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Container } from '@pixi/display';\nimport { ProjectionSurface } from './ProjectionSurface';\n\nexport class Container2s extends Container {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.proj = new ProjectionSurface(this.transform);\n\t}\n\n\tproj: ProjectionSurface;\n\n\tget worldTransform() {\n\t\treturn this.proj as any;\n\t}\n}\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Matrix } from '@pixi/math';\nimport { ProjectionSurface } from '../ProjectionSurface';\nimport { Sprite } from '@pixi/sprite';\nimport { Texture, TextureMatrix } from '@pixi/core';\n\nexport class Sprite2s extends Sprite {\n\tconstructor(texture: Texture) {\n\t\tsuper(texture);\n\t\tthis.proj = new ProjectionSurface(this.transform);\n\t\tthis.pluginName = 'batch_bilinear';\n\t}\n\n\tproj: ProjectionSurface;\n\taTrans = new Matrix();\n\n\t_calculateBounds() {\n\t\tthis.calculateTrimmedVertices();\n\t\tthis._bounds.addQuad(this.vertexTrimmedData as any);\n\t}\n\n\tcalculateVertices() {\n\t\tconst wid = (this.transform as any)._worldID;\n\t\tconst tuid = (this._texture as any)._updateID;\n\t\tif (this._transformID === wid && this._textureID === tuid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transformID = wid;\n\t\tthis._textureID = tuid;\n\n\t\tconst texture = this._texture;\n\t\tconst vertexData = this.vertexData;\n\t\tconst trim = texture.trim;\n\t\tconst orig = texture.orig;\n\t\tconst anchor = (this._anchor as any) as { _x: number, _y: number};\n\n\t\tlet w0 = 0;\n\t\tlet w1 = 0;\n\t\tlet h0 = 0;\n\t\tlet h1 = 0;\n\n\t\tif (trim) {\n\t\t\tw1 = trim.x - (anchor._x * orig.width);\n\t\t\tw0 = w1 + trim.width;\n\n\t\t\th1 = trim.y - (anchor._y * orig.height);\n\t\t\th0 = h1 + trim.height;\n\t\t}\n\t\telse {\n\t\t\tw1 = -anchor._x * orig.width;\n\t\t\tw0 = w1 + orig.width;\n\n\t\t\th1 = -anchor._y * orig.height;\n\t\t\th0 = h1 + orig.height;\n\t\t}\n\n\t\tif (this.proj._surface) {\n\t\t\tvertexData[0] = w1;\n\t\t\tvertexData[1] = h1;\n\t\t\tvertexData[2] = w0;\n\t\t\tvertexData[3] = h1;\n\t\t\tvertexData[4] = w0;\n\t\t\tvertexData[5] = h0;\n\t\t\tvertexData[6] = w1;\n\t\t\tvertexData[7] = h0;\n\t\t\tthis.proj._surface.boundsQuad(vertexData, vertexData);\n\t\t} else {\n\t\t\tconst wt = this.transform.worldTransform;\n\t\t\tconst a = wt.a;\n\t\t\tconst b = wt.b;\n\t\t\tconst c = wt.c;\n\t\t\tconst d = wt.d;\n\t\t\tconst tx = wt.tx;\n\t\t\tconst ty = wt.ty;\n\t\t\tvertexData[0] = (a * w1) + (c * h1) + tx;\n\t\t\tvertexData[1] = (d * h1) + (b * w1) + ty;\n\t\t\tvertexData[2] = (a * w0) + (c * h1) + tx;\n\t\t\tvertexData[3] = (d * h1) + (b * w0) + ty;\n\t\t\tvertexData[4] = (a * w0) + (c * h0) + tx;\n\t\t\tvertexData[5] = (d * h0) + (b * w0) + ty;\n\t\t\tvertexData[6] = (a * w1) + (c * h0) + tx;\n\t\t\tvertexData[7] = (d * h0) + (b * w1) + ty;\n\t\t\tif (this.proj._activeProjection) {\n\t\t\t\tthis.proj._activeProjection.surface.boundsQuad(vertexData, vertexData);\n\t\t\t}\n\t\t}\n\n\t\tif (!texture.uvMatrix) {\n\t\t\ttexture.uvMatrix = new TextureMatrix(texture);\n\t\t}\n\t\ttexture.uvMatrix.update();\n\n\t\tconst aTrans = this.aTrans;\n\t\taTrans.set(orig.width, 0, 0, orig.height, w1, h1);\n\t\tif (this.proj._surface === null) {\n\t\t\taTrans.prepend(this.transform.worldTransform);\n\t\t}\n\t\taTrans.invert();\n\t\taTrans.prepend((texture.uvMatrix as any).mapCoord);\n\t}\n\n\tcalculateTrimmedVertices() {\n\t\tconst wid = (this.transform as any)._worldID;\n\t\tconst tuid = (this._texture as any)._updateID;\n\t\tif (!this.vertexTrimmedData) {\n\t\t\tthis.vertexTrimmedData = new Float32Array(8);\n\t\t}\n\t\telse if (this._transformTrimmedID === wid && this._textureTrimmedID === tuid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transformTrimmedID = wid;\n\t\tthis._textureTrimmedID = tuid;\n\n\t\t// lets do some special trim code!\n\t\tconst texture = this._texture;\n\t\tconst vertexData = this.vertexTrimmedData;\n\t\tconst orig = texture.orig;\n\t\tconst anchor = (this._anchor as any) as { _x: number, _y: number };\n\n\t\t// lets calculate the new untrimmed bounds..\n\n\t\tconst w1 = -anchor._x * orig.width;\n\t\tconst w0 = w1 + orig.width;\n\n\t\tconst h1 = -anchor._y * orig.height;\n\t\tconst h0 = h1 + orig.height;\n\n\t\t//TODO: take rotations into account! form temporary bounds\n\n\t\tif (this.proj._surface) {\n\t\t\tvertexData[0] = w1;\n\t\t\tvertexData[1] = h1;\n\t\t\tvertexData[2] = w0;\n\t\t\tvertexData[3] = h1;\n\t\t\tvertexData[4] = w0;\n\t\t\tvertexData[5] = h0;\n\t\t\tvertexData[6] = w1;\n\t\t\tvertexData[7] = h0;\n\t\t\tthis.proj._surface.boundsQuad(vertexData, vertexData, this.transform.worldTransform);\n\t\t} else {\n\t\t\tlet wt = this.transform.worldTransform;\n\t\t\tlet a = wt.a;\n\t\t\tlet b = wt.b;\n\t\t\tlet c = wt.c;\n\t\t\tlet d = wt.d;\n\t\t\tlet tx = wt.tx;\n\t\t\tlet ty = wt.ty;\n\t\t\tvertexData[0] = (a * w1) + (c * h1) + tx;\n\t\t\tvertexData[1] = (d * h1) + (b * w1) + ty;\n\t\t\tvertexData[2] = (a * w0) + (c * h1) + tx;\n\t\t\tvertexData[3] = (d * h1) + (b * w0) + ty;\n\t\t\tvertexData[4] = (a * w0) + (c * h0) + tx;\n\t\t\tvertexData[5] = (d * h0) + (b * w0) + ty;\n\t\t\tvertexData[6] = (a * w1) + (c * h0) + tx;\n\t\t\tvertexData[7] = (d * h0) + (b * w1) + ty;\n\t\t\tif (this.proj._activeProjection) {\n\t\t\t\tthis.proj._activeProjection.surface.boundsQuad(vertexData, vertexData,\n\t\t\t\t\tthis.proj._activeProjection.legacy.worldTransform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj as any;\n\t}\n}","/// <reference path=\"../../types.d.ts\" />\n\nimport { Matrix } from '@pixi/math';\nimport { ProjectionSurface } from '../ProjectionSurface';\nimport { Sprite2s } from './Sprite2s';\nimport { Text, TextStyle } from '@pixi/text';\n\nexport class Text2s extends Text {\n\tconstructor(text?: string, style?: TextStyle, canvas?: HTMLCanvasElement) {\n\t\tsuper(text, style, canvas);\n\t\tthis.proj = new ProjectionSurface(this.transform);\n\t\tthis.pluginName = 'batch_bilinear';\n\t}\n\n\tproj: ProjectionSurface;\n\n\taTrans = new Matrix();\n\n\tget worldTransform() {\n\t\treturn this.proj as any;\n\t}\n}\n\n(Text2s.prototype as any).calculateVertices = Sprite2s.prototype.calculateVertices;\n(Text2s.prototype as any).calculateTrimmedVertices = Sprite2s.prototype.calculateTrimmedVertices;\n(Text2s.prototype as any)._calculateBounds = Sprite2s.prototype._calculateBounds;\n\n","// according to https://jsperf.com/obj-vs-array-view-access/1 , Float64Array is the best here\n/// <reference path=\"../types.d.ts\" />\n\nimport { AFFINE } from '../constants';\nimport { Point } from '@pixi/math';\n\nimport type { IPoint, Matrix } from '@pixi/math';\n\nconst mat3id = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n\nexport class Matrix2d {\n\t/**\n\t * A default (identity) matrix\n\t *\n\t * @static\n\t * @const\n\t */\n\tstatic readonly IDENTITY = new Matrix2d();\n\n\t/**\n\t * A temp matrix\n\t *\n\t * @static\n\t * @const\n\t */\n\tstatic readonly TEMP_MATRIX = new Matrix2d();\n\n\t/**\n\t * mat3 implementation through array of 9 elements\n\t */\n\tmat3: Float64Array;\n\n\tfloatArray: Float32Array = null;\n\n\tconstructor(backingArray?: ArrayLike<number>) {\n\t\tthis.mat3 = new Float64Array(backingArray || mat3id);\n\t}\n\n\tget a() {\n\t\treturn this.mat3[0] / this.mat3[8];\n\t}\n\n\tget b() {\n\t\treturn this.mat3[1] / this.mat3[8];\n\t}\n\n\tget c() {\n\t\treturn this.mat3[3] / this.mat3[8];\n\t}\n\n\tget d() {\n\t\treturn this.mat3[4] / this.mat3[8];\n\t}\n\n\tget tx() {\n\t\treturn this.mat3[6] / this.mat3[8];\n\t}\n\n\tget ty() {\n\t\treturn this.mat3[7] / this.mat3[8];\n\t}\n\n\tset a(value: number) {\n\t\tthis.mat3[0] = value * this.mat3[8];\n\t}\n\n\tset b(value: number) {\n\t\tthis.mat3[1] = value * this.mat3[8];\n\t}\n\n\tset c(value: number) {\n\t\tthis.mat3[3] = value * this.mat3[8];\n\t}\n\n\tset d(value: number) {\n\t\tthis.mat3[4] = value * this.mat3[8];\n\t}\n\n\tset tx(value: number) {\n\t\tthis.mat3[6] = value * this.mat3[8];\n\t}\n\n\tset ty(value: number) {\n\t\tthis.mat3[7] = value * this.mat3[8];\n\t}\n\n\tset(a: number, b: number, c: number, d: number, tx: number, ty: number) {\n\t\tlet mat3 = this.mat3;\n\t\tmat3[0] = a;\n\t\tmat3[1] = b;\n\t\tmat3[2] = 0;\n\t\tmat3[3] = c;\n\t\tmat3[4] = d;\n\t\tmat3[5] = 0;\n\t\tmat3[6] = tx;\n\t\tmat3[7] = ty;\n\t\tmat3[8] = 1;\n\t\treturn this;\n\t}\n\n\ttoArray(transpose?: boolean, out?: Float32Array): Float32Array {\n\t\tif (!this.floatArray) {\n\t\t\tthis.floatArray = new Float32Array(9);\n\t\t}\n\n\t\tconst array = out || this.floatArray;\n\t\tconst mat3 = this.mat3;\n\n\t\tif (transpose) {\n\t\t\tarray[0] = mat3[0];\n\t\t\tarray[1] = mat3[1];\n\t\t\tarray[2] = mat3[2];\n\t\t\tarray[3] = mat3[3];\n\t\t\tarray[4] = mat3[4];\n\t\t\tarray[5] = mat3[5];\n\t\t\tarray[6] = mat3[6];\n\t\t\tarray[7] = mat3[7];\n\t\t\tarray[8] = mat3[8];\n\t\t} else {\n\t\t\t//this branch is NEVER USED in pixi\n\t\t\tarray[0] = mat3[0];\n\t\t\tarray[1] = mat3[3];\n\t\t\tarray[2] = mat3[6];\n\t\t\tarray[3] = mat3[1];\n\t\t\tarray[4] = mat3[4];\n\t\t\tarray[5] = mat3[7];\n\t\t\tarray[6] = mat3[2];\n\t\t\tarray[7] = mat3[5];\n\t\t\tarray[8] = mat3[8];\n\t\t}\n\n\t\treturn array;\n\t}\n\n\t//TODO: remove props\n\tapply(pos: IPoint, newPos: IPoint): IPoint {\n\t\tnewPos = newPos || new Point();\n\n\t\tconst mat3 = this.mat3;\n\t\tconst x = pos.x;\n\t\tconst y = pos.y;\n\n\t\tlet z = 1.0 / (mat3[2] * x + mat3[5] * y + mat3[8]);\n\t\tnewPos.x = z * (mat3[0] * x + mat3[3] * y + mat3[6]);\n\t\tnewPos.y = z * (mat3[1] * x + mat3[4] * y + mat3[7]);\n\n\t\treturn newPos;\n\t}\n\n\ttranslate(tx: number, ty: number) {\n\t\tconst mat3 = this.mat3;\n\t\tmat3[0] += tx * mat3[2];\n\t\tmat3[1] += ty * mat3[2];\n\t\tmat3[3] += tx * mat3[5];\n\t\tmat3[4] += ty * mat3[5];\n\t\tmat3[6] += tx * mat3[8];\n\t\tmat3[7] += ty * mat3[8];\n\t\treturn this;\n\t}\n\n\tscale(x: number, y: number) {\n\t\tconst mat3 = this.mat3;\n\t\tmat3[0] *= x;\n\t\tmat3[1] *= y;\n\t\tmat3[3] *= x;\n\t\tmat3[4] *= y;\n\t\tmat3[6] *= x;\n\t\tmat3[7] *= y;\n\t\treturn this;\n\t}\n\n\tscaleAndTranslate(scaleX: number, scaleY: number, tx: number, ty: number) {\n\t\tconst mat3 = this.mat3;\n\t\tmat3[0] = scaleX * mat3[0] + tx * mat3[2];\n\t\tmat3[1] = scaleY * mat3[1] + ty * mat3[2];\n\t\tmat3[3] = scaleX * mat3[3] + tx * mat3[5];\n\t\tmat3[4] = scaleY * mat3[4] + ty * mat3[5];\n\t\tmat3[6] = scaleX * mat3[6] + tx * mat3[8];\n\t\tmat3[7] = scaleY * mat3[7] + ty * mat3[8];\n\t}\n\n\t//TODO: remove props\n\tapplyInverse(pos: IPoint, newPos: IPoint): IPoint {\n\t\tnewPos = newPos || new Point();\n\n\t\tconst a = this.mat3;\n\t\tconst x = pos.x;\n\t\tconst y = pos.y;\n\n\t\tconst a00 = a[0], a01 = a[3], a02 = a[6],\n\t\t\ta10 = a[1], a11 = a[4], a12 = a[7],\n\t\t\ta20 = a[2], a21 = a[5], a22 = a[8];\n\n\t\tlet newX = (a22 * a11 - a12 * a21) * x + (-a22 * a01 + a02 * a21) * y + (a12 * a01 - a02 * a11);\n\t\tlet newY = (-a22 * a10 + a12 * a20) * x + (a22 * a00 - a02 * a20) * y + (-a12 * a00 + a02 * a10);\n\t\tlet newZ = (a21 * a10 - a11 * a20) * x + (-a21 * a00 + a01 * a20) * y + (a11 * a00 - a01 * a10);\n\n\t\tnewPos.x = newX / newZ;\n\t\tnewPos.y = newY / newZ;\n\n\t\treturn newPos;\n\t}\n\n\tinvert(): Matrix2d {\n\t\tconst a = this.mat3;\n\n\t\tconst a00 = a[0], a01 = a[1], a02 = a[2],\n\t\t\ta10 = a[3], a11 = a[4], a12 = a[5],\n\t\t\ta20 = a[6], a21 = a[7], a22 = a[8],\n\n\t\t\tb01 = a22 * a11 - a12 * a21,\n\t\t\tb11 = -a22 * a10 + a12 * a20,\n\t\t\tb21 = a21 * a10 - a11 * a20;\n\n\t\t// Calculate the determinant\n\t\tlet det = a00 * b01 + a01 * b11 + a02 * b21;\n\t\tif (!det) {\n\t\t\treturn this;\n\t\t}\n\t\tdet = 1.0 / det;\n\n\t\ta[0] = b01 * det;\n\t\ta[1] = (-a22 * a01 + a02 * a21) * det;\n\t\ta[2] = (a12 * a01 - a02 * a11) * det;\n\t\ta[3] = b11 * det;\n\t\ta[4] = (a22 * a00 - a02 * a20) * det;\n\t\ta[5] = (-a12 * a00 + a02 * a10) * det;\n\t\ta[6] = b21 * det;\n\t\ta[7] = (-a21 * a00 + a01 * a20) * det;\n\t\ta[8] = (a11 * a00 - a01 * a10) * det;\n\n\t\treturn this;\n\t}\n\n\tidentity(): Matrix2d {\n\t\tconst mat3 = this.mat3;\n\t\tmat3[0] = 1;\n\t\tmat3[1] = 0;\n\t\tmat3[2] = 0;\n\t\tmat3[3] = 0;\n\t\tmat3[4] = 1;\n\t\tmat3[5] = 0;\n\t\tmat3[6] = 0;\n\t\tmat3[7] = 0;\n\t\tmat3[8] = 1;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Matrix2d(this.mat3);\n\t}\n\n\tcopyTo2dOr3d(matrix: Matrix2d) {\n\t\tconst mat3 = this.mat3;\n\t\tconst ar2 = matrix.mat3;\n\t\tar2[0] = mat3[0];\n\t\tar2[1] = mat3[1];\n\t\tar2[2] = mat3[2];\n\t\tar2[3] = mat3[3];\n\t\tar2[4] = mat3[4];\n\t\tar2[5] = mat3[5];\n\t\tar2[6] = mat3[6];\n\t\tar2[7] = mat3[7];\n\t\tar2[8] = mat3[8];\n\t\treturn matrix;\n\t}\n\n\t/**\n\t * legacy method, change the values of given pixi matrix\n\t * @param matrix\n\t * @return matrix\n\t */\n\tcopyTo(matrix: Matrix, affine?: AFFINE, preserveOrientation?: boolean) {\n\t\tconst mat3 = this.mat3;\n\t\tconst d = 1.0 / mat3[8];\n\t\tconst tx = mat3[6] * d, ty = mat3[7] * d;\n\t\tmatrix.a = (mat3[0] - mat3[2] * tx) * d;\n\t\tmatrix.b = (mat3[1] - mat3[2] * ty) * d;\n\t\tmatrix.c = (mat3[3] - mat3[5] * tx) * d;\n\t\tmatrix.d = (mat3[4] - mat3[5] * ty) * d;\n\t\tmatrix.tx = tx;\n\t\tmatrix.ty = ty;\n\n\t\tif (affine >= 2) {\n\t\t\tlet D = matrix.a * matrix.d - matrix.b * matrix.c;\n\t\t\tif (!preserveOrientation) {\n\t\t\t\tD = Math.abs(D);\n\t\t\t}\n\t\t\tif (affine === AFFINE.POINT) {\n\t\t\t\tif (D > 0) {\n\t\t\t\t\tD = 1;\n\t\t\t\t} else D = -1;\n\t\t\t\tmatrix.a = D;\n\t\t\t\tmatrix.b = 0;\n\t\t\t\tmatrix.c = 0;\n\t\t\t\tmatrix.d = D;\n\t\t\t} else if (affine === AFFINE.AXIS_X) {\n\t\t\t\tD /= Math.sqrt(matrix.b * matrix.b + matrix.d * matrix.d);\n\t\t\t\tmatrix.c = 0;\n\t\t\t\tmatrix.d = D;\n\t\t\t} else if (affine === AFFINE.AXIS_Y) {\n\t\t\t\tD /= Math.sqrt(matrix.a * matrix.a + matrix.c * matrix.c);\n\t\t\t\tmatrix.a = D;\n\t\t\t\tmatrix.c = 0;\n\t\t\t}\n\t\t\telse if (affine === AFFINE.AXIS_XR) {\n\t\t\t\tmatrix.a =  matrix.d * D;\n\t\t\t\tmatrix.c = -matrix.b * D;\n\t\t\t}\n\t\t}\n\t\treturn matrix;\n\t}\n\n\t/**\n\t * legacy method, change the values of given pixi matrix\n\t * @param matrix\n\t * @return\n\t */\n\tcopyFrom(matrix: Matrix) {\n\t\tconst mat3 = this.mat3;\n\t\tmat3[0] = matrix.a;\n\t\tmat3[1] = matrix.b;\n\t\tmat3[2] = 0;\n\t\tmat3[3] = matrix.c;\n\t\tmat3[4] = matrix.d;\n\t\tmat3[5] = 0;\n\t\tmat3[6] = matrix.tx;\n\t\tmat3[7] = matrix.ty;\n\t\tmat3[8] = 1.0;\n\t\treturn this;\n\t}\n\n\tsetToMultLegacy(pt: Matrix, lt: Matrix2d) {\n\t\tconst out = this.mat3;\n\t\tconst b = lt.mat3;\n\n\t\tconst a00 = pt.a, a01 = pt.b,\n\t\t\ta10 = pt.c, a11 = pt.d,\n\t\t\ta20 = pt.tx, a21 = pt.ty,\n\n\t\t\tb00 = b[0], b01 = b[1], b02 = b[2],\n\t\t\tb10 = b[3], b11 = b[4], b12 = b[5],\n\t\t\tb20 = b[6], b21 = b[7], b22 = b[8];\n\n\n\t\tout[0] = b00 * a00 + b01 * a10 + b02 * a20;\n\t\tout[1] = b00 * a01 + b01 * a11 + b02 * a21;\n\t\tout[2] = b02;\n\n\t\tout[3] = b10 * a00 + b11 * a10 + b12 * a20;\n\t\tout[4] = b10 * a01 + b11 * a11 + b12 * a21;\n\t\tout[5] = b12;\n\n\t\tout[6] = b20 * a00 + b21 * a10 + b22 * a20;\n\t\tout[7] = b20 * a01 + b21 * a11 + b22 * a21;\n\t\tout[8] = b22;\n\n\t\treturn this;\n\t}\n\n\tsetToMultLegacy2(pt: Matrix2d, lt: Matrix) {\n\t\tconst out = this.mat3;\n\t\tconst a = pt.mat3;\n\n\t\tconst a00 = a[0], a01 = a[1], a02 = a[2],\n\t\t\ta10 = a[3], a11 = a[4], a12 = a[5],\n\t\t\ta20 = a[6], a21 = a[7], a22 = a[8],\n\n\t\t\tb00 = lt.a, b01 = lt.b,\n\t\t\tb10 = lt.c, b11 = lt.d,\n\t\t\tb20 = lt.tx, b21 = lt.ty;\n\n\n\t\tout[0] = b00 * a00 + b01 * a10;\n\t\tout[1] = b00 * a01 + b01 * a11;\n\t\tout[2] = b00 * a02 + b01 * a12;\n\n\t\tout[3] = b10 * a00 + b11 * a10;\n\t\tout[4] = b10 * a01 + b11 * a11;\n\t\tout[5] = b10 * a02 + b11 * a12;\n\n\t\tout[6] = b20 * a00 + b21 * a10 + a20;\n\t\tout[7] = b20 * a01 + b21 * a11 + a21;\n\t\tout[8] = b20 * a02 + b21 * a12 + a22;\n\n\t\treturn this;\n\t}\n\n\t// that's transform multiplication we use\n\tsetToMult(pt: Matrix2d, lt: Matrix2d) {\n\t\tconst out = this.mat3;\n\t\tconst a = pt.mat3, b = lt.mat3;\n\n\t\tconst a00 = a[0], a01 = a[1], a02 = a[2],\n\t\t\ta10 = a[3], a11 = a[4], a12 = a[5],\n\t\t\ta20 = a[6], a21 = a[7], a22 = a[8],\n\n\t\t\tb00 = b[0], b01 = b[1], b02 = b[2],\n\t\t\tb10 = b[3], b11 = b[4], b12 = b[5],\n\t\t\tb20 = b[6], b21 = b[7], b22 = b[8];\n\n\t\tout[0] = b00 * a00 + b01 * a10 + b02 * a20;\n\t\tout[1] = b00 * a01 + b01 * a11 + b02 * a21;\n\t\tout[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n\t\tout[3] = b10 * a00 + b11 * a10 + b12 * a20;\n\t\tout[4] = b10 * a01 + b11 * a11 + b12 * a21;\n\t\tout[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n\t\tout[6] = b20 * a00 + b21 * a10 + b22 * a20;\n\t\tout[7] = b20 * a01 + b21 * a11 + b22 * a21;\n\t\tout[8] = b20 * a02 + b21 * a12 + b22 * a22;\n\n\t\treturn this;\n\t}\n\n\tprepend(lt: any) {\n\t\tif (lt.mat3) {\n\t\t\treturn this.setToMult(lt, this);\n\t\t} else {\n\t\t\treturn this.setToMultLegacy(lt, this);\n\t\t}\n\t}\n}\n","/// <reference path=\"types.d.ts\" />\n\nimport { Point } from '@pixi/math';\n\nimport type { IPoint } from '@pixi/math';\n\nexport const utils = {\n\tgetIntersectionFactor(p1: IPoint, p2: IPoint, p3: IPoint, p4: IPoint, out: IPoint): number {\n\t\tlet A1 = p2.x - p1.x, B1 = p3.x - p4.x, C1 = p3.x - p1.x;\n\t\tlet A2 = p2.y - p1.y, B2 = p3.y - p4.y, C2 = p3.y - p1.y;\n\t\tlet D = A1 * B2 - A2 * B1;\n\t\tif (Math.abs(D) < 1e-7) {\n\t\t\tout.x = A1;\n\t\t\tout.y = A2;\n\t\t\treturn 0;\n\t\t}\n\t\tlet T = C1 * B2 - C2 * B1;\n\t\tlet U = A1 * C2 - A2 * C1;\n\n\t\tlet t = T / D, u = U / D;\n\t\tif (u < (1e-6) || u - 1 > -1e-6) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tout.x = p1.x + t * (p2.x - p1.x);\n\t\tout.y = p1.y + t * (p2.y - p1.y);\n\n\t\treturn 1;\n\t},\n\tgetPositionFromQuad(p: Array<IPoint>, anchor: IPoint, out: IPoint) {\n\t\tout = out || new Point();\n\t\tlet a1 = 1.0 - anchor.x, a2 = 1.0 - a1;\n\t\tlet b1 = 1.0 - anchor.y, b2 = 1.0 - b1;\n\t\tout.x = (p[0].x * a1 + p[1].x * a2) * b1 + (p[3].x * a1 + p[2].x * a2) * b2;\n\t\tout.y = (p[0].y * a1 + p[1].y * a2) * b1 + (p[3].y * a1 + p[2].y * a2) * b2;\n\t\treturn out;\n\t}\n};\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Matrix2d } from './Matrix2d';\nimport { Matrix, ObservablePoint, Point, Rectangle, Transform } from '@pixi/math';\nimport { LinearProjection } from '../base/LinearProjection';\nimport { utils } from '../utils';\n\nimport type { IPoint } from '@pixi/math';\nimport type { Sprite } from '@pixi/sprite';\n\nconst t0 = new Point();\nconst tt = [new Point(), new Point(), new Point(), new Point()];\nconst tempRect = new Rectangle();\nconst tempMat = new Matrix2d();\n\nexport class Projection2d extends LinearProjection<Matrix2d> {\n\tconstructor(legacy: Transform, enable?: boolean) {\n\t\tsuper(legacy, enable);\n\t\tthis.local = new Matrix2d();\n\t\tthis.world = new Matrix2d();\n\t}\n\n\tmatrix = new Matrix2d();\n\tpivot = new ObservablePoint(this.onChange, this, 0, 0);\n\n\treverseLocalOrder = false;\n\n\tonChange() {\n\t\t// Private members\n\t\tconst pivot = (this.pivot as any) as { _x: number, _y: number};\n\t\tconst mat3 = this.matrix.mat3;\n\n\t\tmat3[6] = -(pivot._x * mat3[0] + pivot._y * mat3[3]);\n\t\tmat3[7] = -(pivot._x * mat3[1] + pivot._y * mat3[4]);\n\n\t\tthis._projID++;\n\t}\n\n\tsetAxisX(p: IPoint, factor: number = 1): void {\n\t\tconst x = p.x, y = p.y;\n\t\tconst d = Math.sqrt(x * x + y * y);\n\t\tconst mat3 = this.matrix.mat3;\n\t\tmat3[0] = x / d;\n\t\tmat3[1] = y / d;\n\t\tmat3[2] = factor / d;\n\n\t\tthis.onChange();\n\t}\n\n\tsetAxisY(p: IPoint, factor: number = 1) {\n\t\tconst x = p.x, y = p.y;\n\t\tconst d = Math.sqrt(x * x + y * y);\n\t\tconst mat3 = this.matrix.mat3;\n\t\tmat3[3] = x / d;\n\t\tmat3[4] = y / d;\n\t\tmat3[5] = factor / d;\n\t\tthis.onChange();\n\t}\n\n\tmapSprite(sprite: Sprite, quad: Array<IPoint>) {\n\t\tconst tex = sprite.texture;\n\n\t\ttempRect.x = -sprite.anchor.x * tex.orig.width;\n\t\ttempRect.y = -sprite.anchor.y * tex.orig.height;\n\t\ttempRect.width = tex.orig.width;\n\t\ttempRect.height = tex.orig.height;\n\n\t\treturn this.mapQuad(tempRect, quad);\n\t}\n\n\tmapQuad(rect: Rectangle, p: Array<IPoint>) {\n\t\t// utils.getPositionFromQuad(p, anchor, t0);\n\t\ttt[0].set(rect.x, rect.y);\n\t\ttt[1].set(rect.x + rect.width, rect.y);\n\t\ttt[2].set(rect.x + rect.width, rect.y + rect.height);\n\t\ttt[3].set(rect.x, rect.y + rect.height);\n\n\t\tlet k1 = 1, k2 = 2, k3 = 3;\n\t\tlet f = utils.getIntersectionFactor(p[0], p[2], p[1], p[3], t0);\n\t\tif (f !== 0) {\n\t\t\tk1 = 1;\n\t\t\tk2 = 3;\n\t\t\tk3 = 2;\n\t\t} else {\n\t\t\treturn;\n\t\t\t/*f = utils.getIntersectionFactor(p[0], p[1], p[2], p[3], t0);\n\t\t\tif (f > 0) {\n\t\t\t\tk1 = 2;\n\t\t\t\tk2 = 3;\n\t\t\t\tk3 = 1;\n\t\t\t} else {\n\t\t\t\tf = utils.getIntersectionFactor(p[0], p[3], p[1], p[2], t0);\n\t\t\t\tif (f > 0) {\n\t\t\t\t\t// cant find it :(\n\t\t\t\t\tk1 = 1;\n\t\t\t\t\tk2 = 2;\n\t\t\t\t\tk3 = 3;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}*/\n\t\t}\n\t\tlet d0 = Math.sqrt((p[0].x - t0.x) * (p[0].x - t0.x) + (p[0].y - t0.y) * (p[0].y - t0.y));\n\t\tlet d1 = Math.sqrt((p[k1].x - t0.x) * (p[k1].x - t0.x) + (p[k1].y - t0.y) * (p[k1].y - t0.y));\n\t\tlet d2 = Math.sqrt((p[k2].x - t0.x) * (p[k2].x - t0.x) + (p[k2].y - t0.y) * (p[k2].y - t0.y));\n\t\tlet d3 = Math.sqrt((p[k3].x - t0.x) * (p[k3].x - t0.x) + (p[k3].y - t0.y) * (p[k3].y - t0.y));\n\n\t\tlet q0 = (d0 + d3) / d3;\n\t\tlet q1 = (d1 + d2) / d2;\n\t\tlet q2 = (d1 + d2) / d1;\n\n\t\tlet mat3 = this.matrix.mat3;\n\t\tmat3[0] = tt[0].x * q0;\n\t\tmat3[1] = tt[0].y * q0;\n\t\tmat3[2] = q0;\n\t\tmat3[3] = tt[k1].x * q1;\n\t\tmat3[4] = tt[k1].y * q1;\n\t\tmat3[5] = q1;\n\t\tmat3[6] = tt[k2].x * q2;\n\t\tmat3[7] = tt[k2].y * q2;\n\t\tmat3[8] = q2;\n\t\tthis.matrix.invert();\n\n\t\tmat3 = tempMat.mat3;\n\t\tmat3[0] = p[0].x;\n\t\tmat3[1] = p[0].y;\n\t\tmat3[2] = 1;\n\t\tmat3[3] = p[k1].x;\n\t\tmat3[4] = p[k1].y;\n\t\tmat3[5] = 1;\n\t\tmat3[6] = p[k2].x;\n\t\tmat3[7] = p[k2].y;\n\t\tmat3[8] = 1;\n\n\t\tthis.matrix.setToMult(tempMat, this.matrix);\n\t\tthis._projID++;\n\t}\n\n\tupdateLocalTransform(lt: Matrix) {\n\t\tif (this._projID !== 0) {\n\t\t\tif (this.reverseLocalOrder) {\n\t\t\t\t// tilingSprite inside order\n\t\t\t\tthis.local.setToMultLegacy2(this.matrix, lt);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// good order\n\t\t\t\tthis.local.setToMultLegacy(lt, this.matrix);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.local.copyFrom(lt);\n\t\t}\n\t}\n\n\tclear() {\n\t\tsuper.clear();\n\t\tthis.matrix.identity();\n\t\tthis.pivot.set(0, 0);\n\t}\n}","/// <reference path=\"../../types.d.ts\" />\n\nimport { Container } from '@pixi/display';\nimport { Matrix } from '@pixi/math';\nimport { Projection2d } from '../../proj2d/Projection2d';\nimport { Sprite } from '@pixi/sprite';\nimport { Sprite2s } from './Sprite2s';\n\nSprite.prototype.convertTo2s = function () {\n\tif (this.proj) return;\n\t//cointainer\n\tthis.pluginName = 'sprite_bilinear';\n\tthis.aTrans = new Matrix();\n\tthis.calculateVertices = Sprite2s.prototype.calculateVertices;\n\tthis.calculateTrimmedVertices = Sprite2s.prototype.calculateTrimmedVertices;\n\tthis._calculateBounds = Sprite2s.prototype._calculateBounds;\n\tContainer.prototype.convertTo2s.call(this);\n};\n\nContainer.prototype.convertTo2s = function () {\n\tif (this.proj) return;\n\tthis.proj = new Projection2d(this.transform);\n\tObject.defineProperty(this, \"worldTransform\", {\n\t\tget: function () {\n\t\t\treturn this.proj;\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n};\n\nContainer.prototype.convertSubtreeTo2s = function () {\n\tthis.convertTo2s();\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tthis.children[i].convertSubtreeTo2s();\n\t}\n};\n\n","/// <reference path=\"../types.d.ts\" />\n\nimport { BatchShaderGenerator, Buffer, Geometry, Renderer, ViewableBuffer } from '@pixi/core';\nimport { Matrix } from '@pixi/math';\nimport { Sprite } from '@pixi/sprite';\nimport { Sprite2s } from './sprites/Sprite2s';\nimport { TYPES } from '@pixi/constants';\nimport { UniformBatchRenderer } from '../base/webgl/UniformBatchRenderer';\nimport { premultiplyTint } from '@pixi/utils';\nimport shaderVert from './sprite-bilinear.vert';\nimport shaderFrag from './sprite-bilinear.frag';\n\nexport class BatchBilineardGeometry extends Geometry\n{\n\t_buffer: Buffer;\n\t_indexBuffer : Buffer;\n\n\tconstructor(_static = false)\n\t{\n\t\tsuper();\n\n\t\tthis._buffer = new Buffer(null, _static, false);\n\n\t\tthis._indexBuffer = new Buffer(null, _static, true);\n\n\t\tthis.addAttribute('aVertexPosition', this._buffer, 2, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aTrans1', this._buffer, 3, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aTrans2', this._buffer, 3, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aSamplerSize', this._buffer, 2, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aFrame', this._buffer, 4, false, TYPES.FLOAT)\n\t\t\t.addAttribute('aColor', this._buffer, 4, true, TYPES.UNSIGNED_BYTE)\n\t\t\t.addAttribute('aTextureId', this._buffer, 1, true, TYPES.FLOAT)\n\t\t\t.addIndex(this._indexBuffer);\n\t}\n}\n\nexport class BatchBilinearPluginFactory {\n\tstatic create(options: any): any\n\t{\n\t\tconst { vertex, fragment, vertexSize, geometryClass } = (Object as any).assign({\n\t\t\tvertex: shaderVert,\n\t\t\tfragment: shaderFrag,\n\t\t\tgeometryClass: BatchBilineardGeometry,\n\t\t\tvertexSize: 16,\n\t\t}, options);\n\n\t\treturn class BatchPlugin extends UniformBatchRenderer\n\t\t{\n\t\t\tconstructor(renderer: Renderer)\n\t\t\t{\n\t\t\t\tsuper(renderer);\n\n\t\t\t\tthis.shaderGenerator = new BatchShaderGenerator(vertex, fragment);\n\t\t\t\tthis.geometryClass = geometryClass;\n\t\t\t\tthis.vertexSize = vertexSize;\n\t\t\t}\n\n\t\t\tdefUniforms = {\n\t\t\t\ttranslationMatrix: new Matrix(),\n\t\t\t\tdistortion: new Float32Array([0, 0, Infinity, Infinity])\n\t\t\t};\n\t\t\tsize = 1000;\n\t\t\tforceMaxTextures = 1;\n\n\t\t\tgetUniforms(sprite: Sprite) {\n\t\t\t\tlet  { proj } = sprite as Sprite2s;\n\t\t\t\tif (proj.surface !== null) {\n\t\t\t\t\treturn proj.uniforms;\n\t\t\t\t}\n\t\t\t\tif (proj._activeProjection !== null) {\n\t\t\t\t\treturn proj._activeProjection.uniforms;\n\t\t\t\t}\n\t\t\t\treturn this.defUniforms;\n\t\t\t}\n\n\t\t\tpackInterleavedGeometry(element: any, attributeBuffer: ViewableBuffer, indexBuffer: Uint16Array, aIndex: number, iIndex: number)\n\t\t\t{\n\t\t\t\tconst {\n\t\t\t\t\tuint32View,\n\t\t\t\t\tfloat32View,\n\t\t\t\t} = attributeBuffer;\n\t\t\t\tconst p = aIndex / this.vertexSize;\n\t\t\t\tconst indices = element.indices;\n\t\t\t\tconst vertexData = element.vertexData;\n\t\t\t\tconst tex = element._texture;\n\t\t\t\tconst frame = tex._frame;\n\t\t\t\tconst aTrans = element.aTrans;\n\t\t\t\tconst { _batchLocation, realWidth, realHeight, resolution } = element._texture.baseTexture;\n\n\t\t\t\tconst alpha = Math.min(element.worldAlpha, 1.0);\n\n\t\t\t\tconst argb = alpha < 1.0 && element._texture.baseTexture.alphaMode ? premultiplyTint(element._tintRGB, alpha)\n\t\t\t\t\t: element._tintRGB + (alpha * 255 << 24);\n\n\t\t\t\tfor (let i = 0; i < vertexData.length; i += 2)\n\t\t\t\t{\n\t\t\t\t\tfloat32View[aIndex] = vertexData[i];\n\t\t\t\t\tfloat32View[aIndex + 1] = vertexData[i + 1];\n\n\t\t\t\t\tfloat32View[aIndex + 2] = aTrans.a;\n\t\t\t\t\tfloat32View[aIndex + 3] = aTrans.c;\n\t\t\t\t\tfloat32View[aIndex + 4] = aTrans.tx;\n\t\t\t\t\tfloat32View[aIndex + 5] = aTrans.b;\n\t\t\t\t\tfloat32View[aIndex + 6] = aTrans.d;\n\t\t\t\t\tfloat32View[aIndex + 7] = aTrans.ty;\n\n\t\t\t\t\tfloat32View[aIndex + 8] = realWidth;\n\t\t\t\t\tfloat32View[aIndex + 9] = realHeight;\n\t\t\t\t\tfloat32View[aIndex + 10] = frame.x * resolution;\n\t\t\t\t\tfloat32View[aIndex + 11] = frame.y * resolution;\n\t\t\t\t\tfloat32View[aIndex + 12] = (frame.x + frame.width) * resolution;\n\t\t\t\t\tfloat32View[aIndex + 13] = (frame.y + frame.height) * resolution;\n\n\t\t\t\t\tuint32View[aIndex + 14] = argb;\n\t\t\t\t\tfloat32View[aIndex + 15] = _batchLocation;\n\t\t\t\t\taIndex += 16;\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < indices.length; i++)\n\t\t\t\t{\n\t\t\t\t\tindexBuffer[iIndex++] = p + indices[i];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\nRenderer.registerPlugin('batch_bilinear', BatchBilinearPluginFactory.create({}));\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Container } from '@pixi/display';\nimport { Projection2d } from './Projection2d';\nimport { TRANSFORM_STEP } from '../constants';\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { IPoint } from '@pixi/math';\n\nexport function container2dWorldTransform() {\n\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n}\n\nexport class Container2d extends Container {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.proj = new Projection2d(this.transform);\n\t}\n\n\tproj: Projection2d;\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\n\t\tif (from)\n\t\t{\n\t\t\tposition = from.toGlobal(position, point, skipUpdate);\n\t\t}\n\n\t\tif (!skipUpdate)\n\t\t{\n\t\t\tthis._recursivePostUpdateTransform();\n\t\t}\n\n\t\tif (step >= TRANSFORM_STEP.PROJ) {\n\t\t\tif (!skipUpdate) {\n\t\t\t\tthis.displayObjectUpdateTransform();\n\t\t\t}\n\t\t\tif (this.proj.affine) {\n\t\t\t\treturn this.transform.worldTransform.applyInverse(position as any, point as any) as any;\n\t\t\t}\n\t\t\treturn this.proj.world.applyInverse(position, point) as any;\n\t\t}\n\n\t\tif (this.parent) {\n\t\t\tpoint  = this.parent.worldTransform.applyInverse(position as any, point as any) as any;\n\t\t} else {\n\t\t\tpoint.copyFrom(position);\n\t\t}\n\t\tif (step === TRANSFORM_STEP.NONE) {\n\t\t\treturn point;\n\t\t}\n\n\t\treturn this.transform.localTransform.applyInverse(point as any, point as any) as any;\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n}\n\nexport let container2dToLocal = Container2d.prototype.toLocal;\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { container2dToLocal } from '../Container2d';\nimport { DRAW_MODES } from '@pixi/constants';\nimport { Geometry, Program, Renderer, Shader, State, Texture } from '@pixi/core';\nimport { Mesh, MeshMaterial, MeshGeometry } from '@pixi/mesh';\nimport { Projection2d } from '../Projection2d';\nimport { TRANSFORM_STEP } from '../../constants';\nimport defaultVertexShader from './mesh2d-default.vert';\nimport defaultFragmentShader from './mesh2d-default.frag';\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { IPoint } from '@pixi/math';\n\nexport class Mesh2d extends Mesh {\n\tstatic defaultVertexShader = defaultVertexShader;\n\tstatic defaultFragmentShader = defaultFragmentShader;\n\n\tconstructor(geometry: Geometry, shader: Shader, state: State, drawMode?: DRAW_MODES)\n\t{\n\t\tsuper(geometry, shader, state, drawMode);\n\t\tthis.proj = new Projection2d(this.transform);\n\t}\n\n\tvertexData2d: Float32Array = null;\n\tproj: Projection2d;\n\n\tcalculateVertices()\n\t{\n\t\tif (this.proj._affine) {\n\t\t\tthis.vertexData2d = null;\n\t\t\tsuper.calculateVertices();\n\t\t\treturn;\n\t\t}\n\n\t\tconst geometry = this.geometry as any;\n\t\tconst vertices = geometry.buffers[0].data;\n\t\tconst thisAny = this as any;\n\n\t\tif (geometry.vertexDirtyId === thisAny.vertexDirty && thisAny._transformID === thisAny.transform._worldID)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthisAny._transformID = thisAny.transform._worldID;\n\n\t\tif (thisAny.vertexData.length !== vertices.length)\n\t\t{\n\t\t\tthisAny.vertexData = new Float32Array(vertices.length);\n\t\t}\n\n\t\tif (!this.vertexData2d || this.vertexData2d.length !== vertices.length * 3 / 2)\n\t\t{\n\t\t\tthis.vertexData2d = new Float32Array(vertices.length * 3);\n\t\t}\n\n\t\tconst wt = this.proj.world.mat3;\n\n\t\tconst vertexData2d = this.vertexData2d;\n\t\tconst vertexData = thisAny.vertexData;\n\n\t\tfor (let i = 0; i < vertexData.length / 2; i++)\n\t\t{\n\t\t\tconst x = vertices[(i * 2)];\n\t\t\tconst y = vertices[(i * 2) + 1];\n\n\t\t\tconst xx = (wt[0] * x) + (wt[3] * y) + wt[6];\n\t\t\tconst yy = (wt[1] * x) + (wt[4] * y) + wt[7];\n\t\t\tconst ww = (wt[2] * x) + (wt[5] * y) + wt[8];\n\n\t\t\tvertexData2d[i * 3] = xx;\n\t\t\tvertexData2d[i * 3 + 1] = yy;\n\t\t\tvertexData2d[i * 3 + 2] = ww;\n\n\t\t\tvertexData[(i * 2)] = xx / ww;\n\t\t\tvertexData[(i * 2) + 1] = yy / ww;\n\t\t}\n\n\t\tthisAny.vertexDirty = geometry.vertexDirtyId;\n\t}\n\n\t_renderDefault(renderer: Renderer) {\n\t\tconst shader = this.shader as MeshMaterial;\n\n\t\tshader.alpha = this.worldAlpha;\n\t\tif (shader.update)\n\t\t{\n\t\t\tshader.update();\n\t\t}\n\n\t\trenderer.batch.flush();\n\n\t\tif ((shader as any).program.uniformData.translationMatrix)\n\t\t{\n\t\t\tshader.uniforms.translationMatrix = this.worldTransform.toArray(true);\n\t\t}\n\n\t\t// bind and sync uniforms..\n\t\trenderer.shader.bind(shader, false);\n\n\t\t// set state..\n\t\trenderer.state.set(this.state);\n\n\t\t// bind the geometry...\n\t\trenderer.geometry.bind(this.geometry, shader);\n\n\t\t// then render it\n\t\trenderer.geometry.draw(this.drawMode, this.size, this.start, (this.geometry as any).instanceCount);\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\t\t\t\t\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\t\t\t\t\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\t\treturn container2dToLocal.call(this, position, from, point, skipUpdate, step);\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n}\n\nexport class SimpleMesh2d extends Mesh2d {\n\tconstructor(texture: Texture, vertices?: Float32Array, uvs?: Float32Array,\n\t\t\t\tindices?: Uint16Array, drawMode?: number) {\n\t\tsuper(new MeshGeometry(vertices, uvs, indices),\n\t\t\tnew MeshMaterial(texture, {\n\t\t\t\tprogram: Program.from(Mesh2d.defaultVertexShader, Mesh2d.defaultFragmentShader),\n\t\t\t\tpluginName: 'batch2d'\n\t\t\t}),\n\t\t\tnull,\n\t\t\tdrawMode);\n\n\t\t(this.geometry.getBuffer('aVertexPosition') as any).static = false;\n\t}\n\n\tautoUpdate = true;\n\n\tget vertices()\n\t{\n\t\treturn this.geometry.getBuffer('aVertexPosition').data as Float32Array;\n\t}\n\tset vertices(value)\n\t{\n\t\tthis.geometry.getBuffer('aVertexPosition').data = value;\n\t}\n\n\tprotected _render(renderer?: Renderer)\n\t{\n\t\tif (this.autoUpdate)\n\t\t{\n\t\t\tthis.geometry.getBuffer('aVertexPosition').update();\n\t\t}\n\n\t\t(super._render as any)(renderer);\n\t}\n}\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Projection2d } from '../Projection2d';\nimport { Sprite } from '@pixi/sprite';\nimport { Texture } from '@pixi/core';\nimport { TRANSFORM_STEP } from '../../constants';\nimport { container2dToLocal } from '../Container2d';\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { IPoint } from '@pixi/math';\n\nexport class Sprite2d extends Sprite {\n\tconstructor(texture: Texture) {\n\t\tsuper(texture);\n\n\t\tthis.proj = new Projection2d(this.transform);\n\t\tthis.pluginName = 'batch2d';\n\t}\n\n\tvertexData2d: Float32Array = null;\n\tproj: Projection2d;\n\n\t_calculateBounds() {\n\t\tthis.calculateTrimmedVertices();\n\t\tthis._bounds.addQuad(this.vertexTrimmedData as any);\n\t}\n\n\tcalculateVertices() {\n\t\tconst texture = this._texture;\n\n\t\tif (this.proj._affine) {\n\t\t\tthis.vertexData2d = null;\n\t\t\tsuper.calculateVertices();\n\t\t\treturn;\n\t\t}\n\t\tif (!this.vertexData2d) {\n\t\t\tthis.vertexData2d = new Float32Array(12);\n\t\t}\n\n\t\tconst wid = (this.transform as any)._worldID;\n\t\tconst tuid = (texture as any)._updateID;\n\t\tif (this._transformID === wid && this._textureID === tuid) {\n\t\t\treturn;\n\t\t}\n\t\t// update texture UV here, because base texture can be changed without calling `_onTextureUpdate`\n\t\tif (this._textureID !== tuid) {\n\t\t\t(this as any).uvs = (texture as any)._uvs.uvsFloat32;\n\t\t}\n\n\t\tthis._transformID = wid;\n\t\tthis._textureID = tuid;\n\n\t\tconst wt = this.proj.world.mat3;\n\t\tconst vertexData2d = this.vertexData2d;\n\t\tconst vertexData = this.vertexData;\n\t\tconst trim = texture.trim;\n\t\tconst orig = texture.orig;\n\t\tconst anchor = (this._anchor as any) as { _x: number, _y: number };\n\n\t\tlet w0 = 0;\n\t\tlet w1 = 0;\n\t\tlet h0 = 0;\n\t\tlet h1 = 0;\n\n\t\tif (trim) {\n\t\t\tw1 = trim.x - (anchor._x * orig.width);\n\t\t\tw0 = w1 + trim.width;\n\n\t\t\th1 = trim.y - (anchor._y * orig.height);\n\t\t\th0 = h1 + trim.height;\n\t\t} else {\n\t\t\tw1 = -anchor._x * orig.width;\n\t\t\tw0 = w1 + orig.width;\n\n\t\t\th1 = -anchor._y * orig.height;\n\t\t\th0 = h1 + orig.height;\n\t\t}\n\n\t\tvertexData2d[0] = (wt[0] * w1) + (wt[3] * h1) + wt[6];\n\t\tvertexData2d[1] = (wt[1] * w1) + (wt[4] * h1) + wt[7];\n\t\tvertexData2d[2] = (wt[2] * w1) + (wt[5] * h1) + wt[8];\n\n\t\tvertexData2d[3] = (wt[0] * w0) + (wt[3] * h1) + wt[6];\n\t\tvertexData2d[4] = (wt[1] * w0) + (wt[4] * h1) + wt[7];\n\t\tvertexData2d[5] = (wt[2] * w0) + (wt[5] * h1) + wt[8];\n\n\t\tvertexData2d[6] = (wt[0] * w0) + (wt[3] * h0) + wt[6];\n\t\tvertexData2d[7] = (wt[1] * w0) + (wt[4] * h0) + wt[7];\n\t\tvertexData2d[8] = (wt[2] * w0) + (wt[5] * h0) + wt[8];\n\n\t\tvertexData2d[9] = (wt[0] * w1) + (wt[3] * h0) + wt[6];\n\t\tvertexData2d[10] = (wt[1] * w1) + (wt[4] * h0) + wt[7];\n\t\tvertexData2d[11] = (wt[2] * w1) + (wt[5] * h0) + wt[8];\n\n\t\tvertexData[0] = vertexData2d[0] / vertexData2d[2];\n\t\tvertexData[1] = vertexData2d[1] / vertexData2d[2];\n\n\t\tvertexData[2] = vertexData2d[3] / vertexData2d[5];\n\t\tvertexData[3] = vertexData2d[4] / vertexData2d[5];\n\n\t\tvertexData[4] = vertexData2d[6] / vertexData2d[8];\n\t\tvertexData[5] = vertexData2d[7] / vertexData2d[8];\n\n\t\tvertexData[6] = vertexData2d[9] / vertexData2d[11];\n\t\tvertexData[7] = vertexData2d[10] / vertexData2d[11];\n\t}\n\n\tcalculateTrimmedVertices() {\n\t\tif (this.proj._affine) {\n\t\t\tsuper.calculateTrimmedVertices();\n\t\t\treturn;\n\t\t}\n\n\t\tconst wid = (this.transform as any)._worldID;\n\t\tconst tuid = (this._texture as any)._updateID;\n\t\tif (!this.vertexTrimmedData) {\n\t\t\tthis.vertexTrimmedData = new Float32Array(8);\n\t\t} else if (this._transformTrimmedID === wid && this._textureTrimmedID === tuid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transformTrimmedID = wid;\n\t\tthis._textureTrimmedID = tuid;\n\n\t\t// lets do some special trim code!\n\t\tconst texture = this._texture;\n\t\tconst vertexData = this.vertexTrimmedData;\n\t\tconst orig = texture.orig;\n\t\tconst anchor = (this._anchor as any) as { _x: number, _y: number };\n\n\t\t// lets calculate the new untrimmed bounds..\n\t\tconst wt = this.proj.world.mat3;\n\n\t\tconst w1 = -anchor._x * orig.width;\n\t\tconst w0 = w1 + orig.width;\n\n\t\tconst h1 = -anchor._y * orig.height;\n\t\tconst h0 = h1 + orig.height;\n\n\t\tlet z = 1.0 / (wt[2] * w1 + wt[5] * h1 + wt[8]);\n\t\tvertexData[0] = z * ((wt[0] * w1) + (wt[3] * h1) + wt[6]);\n\t\tvertexData[1] = z * ((wt[1] * w1) + (wt[4] * h1) + wt[7]);\n\n\t\tz = 1.0 / (wt[2] * w0 + wt[5] * h1 + wt[8]);\n\t\tvertexData[2] = z * ((wt[0] * w0) + (wt[3] * h1) + wt[6]);\n\t\tvertexData[3] = z * ((wt[1] * w0) + (wt[4] * h1) + wt[7]);\n\n\t\tz = 1.0 / (wt[2] * w0 + wt[5] * h0 + wt[8]);\n\t\tvertexData[4] = z * ((wt[0] * w0) + (wt[3] * h0) + wt[6]);\n\t\tvertexData[5] = z * ((wt[1] * w0) + (wt[4] * h0) + wt[7]);\n\n\t\tz = 1.0 / (wt[2] * w1 + wt[5] * h0 + wt[8]);\n\t\tvertexData[6] = z * ((wt[0] * w1) + (wt[3] * h0) + wt[6]);\n\t\tvertexData[7] = z * ((wt[1] * w1) + (wt[4] * h0) + wt[7]);\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\t\t\t\t\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\t\t\t\t\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\t\treturn container2dToLocal.call(this, position, from, point, skipUpdate, step);\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n}\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Projection2d } from '../Projection2d';\nimport { Sprite2d } from './Sprite2d';\nimport { Text } from '@pixi/text';\n\nimport type { TextStyle } from '@pixi/text';\n\nexport class Text2d extends Text {\n\tconstructor(text?: string, style?: TextStyle, canvas?: HTMLCanvasElement) {\n\t\tsuper(text, style, canvas);\n\t\tthis.proj = new Projection2d(this.transform);\n\t\tthis.pluginName = 'batch2d';\n\t}\n\n\tproj: Projection2d;\n\tvertexData2d: Float32Array = null;\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n}\n\nText2d.prototype.calculateVertices = Sprite2d.prototype.calculateVertices;\n(Text2d.prototype as any).calculateTrimmedVertices = Sprite2d.prototype.calculateTrimmedVertices;\n(Text2d.prototype as any)._calculateBounds = Sprite2d.prototype._calculateBounds;","/// <reference path=\"../../types.d.ts\" />\n\nimport { DisplayObject } from '@pixi/display';\nimport { Renderer, Texture } from '@pixi/core';\nimport { Projection2d } from '../Projection2d';\nimport { TilingSprite } from '@pixi/sprite-tiling';\nimport { Transform } from '@pixi/math';\nimport { TRANSFORM_STEP } from '../../constants';\nimport { container2dToLocal } from '../Container2d';\n\nimport type { IPoint } from '@pixi/math';\n\nconst tempTransform = new Transform();\n\nexport const TilingSprite2d: typeof TilingSprite = !TilingSprite ? null : class TilingSprite2d extends TilingSprite {\n\tconstructor(texture: Texture, width: number, height: number) {\n\t\tsuper(texture, width, height);\n\n\t\tthis.tileProj = new Projection2d(this.tileTransform);\n\t\tthis.tileProj.reverseLocalOrder = true;\n\t\tthis.proj = new Projection2d(this.transform);\n\n\t\tthis.pluginName = 'tilingSprite2d';\n\t\tthis.uvRespectAnchor = true;\n\t}\n\n\ttileProj: Projection2d;\n\tproj: Projection2d;\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\t\t\t\t\t\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\t\t\t\t\t\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\t\treturn container2dToLocal.call(this, position, from, point, skipUpdate, step);\n\t}\n\n\t_render(renderer: Renderer)\n\t{\n\t\t// tweak our texture temporarily..\n\t\tconst texture = this._texture;\n\n\t\tif (!texture || !texture.valid)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// changed\n\t\tthis.tileTransform.updateTransform(tempTransform);\n\t\tthis.uvMatrix.update();\n\n\t\trenderer.batch.setObjectRenderer((renderer.plugins as any)[this.pluginName]);\n\t\t(renderer.plugins as any)[this.pluginName].render(this);\n\t}\n}\n","import { Filter, RenderTexture, TextureMatrix, systems } from '@pixi/core';\nimport { Matrix2d } from '../Matrix2d';\nimport spriteMaskVert from './sprite-mask.vert';\nimport spriteMaskFrag from './sprite-mask.frag';\n\nimport type { Projection2d } from '../Projection2d';\nimport type { Sprite } from '@pixi/sprite';\n\nconst tempMat = new Matrix2d();\n\nexport class SpriteMaskFilter2d extends Filter {\n\tconstructor(sprite: Sprite) {\n\t\tsuper(spriteMaskVert, spriteMaskFrag);\n\n\t\tsprite.renderable = false;\n\n\t\tthis.maskSprite = sprite;\n\t}\n\n\tmaskSprite: Sprite;\n\tmaskMatrix = new Matrix2d();\n\n\tapply(filterManager: systems.FilterSystem, input: RenderTexture, output: RenderTexture,\n\t\t\tclearMode?: boolean) {\n\t\tconst maskSprite = this.maskSprite;\n\t\tconst tex = this.maskSprite.texture;\n\n\t\tif (!tex.valid)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!tex.uvMatrix)\n\t\t{\n\t\t\t// margin = 0.0, let it bleed a bit, shader code becomes easier\n\t\t\t// assuming that atlas textures were made with 1-pixel padding\n\t\t\ttex.uvMatrix = new TextureMatrix(tex, 0.0);\n\t\t}\n\t\ttex.uvMatrix.update();\n\n\t\tthis.uniforms.npmAlpha = tex.baseTexture.alphaMode ? 0.0 : 1.0;\n\t\tthis.uniforms.mask = maskSprite.texture;\n\t\tthis.uniforms.otherMatrix = SpriteMaskFilter2d.calculateSpriteMatrix(input, this.maskMatrix, maskSprite)\n\t\t\t.prepend(tex.uvMatrix.mapCoord);\n\t\tthis.uniforms.alpha = maskSprite.worldAlpha;\n\t\tthis.uniforms.maskClamp = tex.uvMatrix.uClampFrame;\n\n\t\tfilterManager.applyFilter(this, input, output, clearMode);\n\t}\n\n\tstatic calculateSpriteMatrix(input: RenderTexture, mappedMatrix: Matrix2d, sprite: Sprite) {\n\t\tlet proj = (sprite as any).proj as Projection2d;\n\n\t\tconst filterArea = (input as any).filterFrame;\n\n\t\tconst worldTransform = proj && !proj._affine ? proj.world.copyTo2dOr3d(tempMat) : tempMat.copyFrom(sprite.transform.worldTransform);\n\t\tconst texture = sprite.texture.orig;\n\n\t\tmappedMatrix.set(input.width, 0, 0, input.height, filterArea.x, filterArea.y);\n\t\tworldTransform.invert();\n\t\tmappedMatrix.setToMult(worldTransform, mappedMatrix);\n\t\tmappedMatrix.scaleAndTranslate(1.0 / texture.width, 1.0 / texture.height,\n\t\t\tsprite.anchor.x, sprite.anchor.y);\n\n\t\treturn mappedMatrix;\n\t}\n}\n","/// <reference path=\"../../types.d.ts\" />\n/// <reference path=\"../../../global.d.ts\" />\n\nimport { Container } from '@pixi/display';\nimport { Program } from '@pixi/core';\nimport { Sprite } from '@pixi/sprite';\nimport { Sprite2d } from './Sprite2d';\nimport { Mesh2d } from '../mesh/Mesh2d';\nimport { MeshMaterial } from '@pixi/mesh';\nimport { SimpleMesh, SimpleRope } from '@pixi/mesh-extras';\n\nimport { Projection2d } from '../Projection2d';\nimport { Container2d, container2dWorldTransform } from '../Container2d';\n\nfunction convertTo2d(this: Container | Sprite) {\n\tconst _this = this as Container2d;\n\t\n\tif (_this.proj) return;\n\n\t_this.proj = new Projection2d(this.transform);\n\t_this.toLocal = Container2d.prototype.toLocal;\n\n\tObject.defineProperty(this, \"worldTransform\", {\n\t\tget: container2dWorldTransform,\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n}\n\n\nContainer.prototype.convertTo2d = convertTo2d;\n\nSprite.prototype.convertTo2d = function () {\n\tif (this.proj) return;\n\tthis.calculateVertices = Sprite2d.prototype.calculateVertices;\n\tthis.calculateTrimmedVertices = Sprite2d.prototype.calculateTrimmedVertices;\n\tthis._calculateBounds = Sprite2d.prototype._calculateBounds;\n\tthis.pluginName = 'batch2d';\n\tconvertTo2d.call(this);\n};\n\nContainer.prototype.convertSubtreeTo2d = function () {\n\tthis.convertTo2d();\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tthis.children[i].convertSubtreeTo2d();\n\t}\n};\n\nif (SimpleMesh) {\n\tSimpleMesh.prototype.convertTo2d =\n\t\tSimpleRope.prototype.convertTo2d =\n\t\t\tfunction () {\n\t\t\t\tif (this.proj) return;\n\t\t\t\tthis.calculateVertices = Mesh2d.prototype.calculateVertices;\n\t\t\t\tthis._renderDefault = Mesh2d.prototype._renderDefault;\n\t\t\t\tif (this.material.pluginName !== 'batch2d') {\n\t\t\t\t\tthis.material = new MeshMaterial(this.material.texture, {\n\t\t\t\t\t\tprogram: Program.from(Mesh2d.defaultVertexShader, Mesh2d.defaultFragmentShader),\n\t\t\t\t\t\tpluginName: 'batch2d'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconvertTo2d.call(this);\n\t\t\t};\n}","import * as utils from '@pixi/utils';\nimport { Matrix2d } from '../Matrix2d'\nimport { ObjectRenderer, QuadUv, Shader, Renderer } from '@pixi/core';\nimport { DRAW_MODES, WRAP_MODES } from '@pixi/constants';\nimport shaderVert from './tiling-sprite.vert';\nimport shaderFrag from './tiling-sprite.frag';\nimport shaderSimpleFrag from './tiling-sprite-simple.frag';\n\n// changed\nconst tempMat = new Matrix2d();\n\nexport class TilingSprite2dRenderer extends ObjectRenderer\n{\n    constructor(renderer: Renderer)\n    {\n        super(renderer);\n\n        const uniforms = { globals: this.renderer.globalUniforms };\n\n        this.shader = Shader.from(shaderVert, shaderFrag, uniforms);\n\n        this.simpleShader = Shader.from(shaderVert, shaderSimpleFrag, uniforms);\n    }\n\n    shader: Shader;\n    simpleShader: Shader;\n    quad = new QuadUv();\n\n    render(ts: any)\n    {\n        const renderer = this.renderer;\n        const quad = this.quad;\n\n        let vertices = quad.vertices;\n\n        vertices[0] = vertices[6] = (ts._width) * -ts.anchor.x;\n        vertices[1] = vertices[3] = ts._height * -ts.anchor.y;\n\n        vertices[2] = vertices[4] = (ts._width) * (1.0 - ts.anchor.x);\n        vertices[5] = vertices[7] = ts._height * (1.0 - ts.anchor.y);\n\n        if (ts.uvRespectAnchor)\n        {\n            vertices = quad.uvs;\n\n            vertices[0] = vertices[6] = -ts.anchor.x;\n            vertices[1] = vertices[3] = -ts.anchor.y;\n\n            vertices[2] = vertices[4] = 1.0 - ts.anchor.x;\n            vertices[5] = vertices[7] = 1.0 - ts.anchor.y;\n        }\n\n        quad.invalidate();\n\n        const tex = ts._texture;\n        const baseTex = tex.baseTexture;\n        const lt = ts.tileProj.world;\n        const uv = ts.uvMatrix;\n        let isSimple = baseTex.isPowerOfTwo\n            && tex.frame.width === baseTex.width && tex.frame.height === baseTex.height;\n\n        // auto, force repeat wrapMode for big tiling textures\n        if (isSimple)\n        {\n            if (!baseTex._glTextures[(renderer as any).CONTEXT_UID])\n            {\n                if (baseTex.wrapMode === WRAP_MODES.CLAMP)\n                {\n                    baseTex.wrapMode = WRAP_MODES.REPEAT;\n                }\n            }\n            else\n            {\n                isSimple = baseTex.wrapMode !== WRAP_MODES.CLAMP;\n            }\n        }\n\n        const shader = isSimple ? this.simpleShader : this.shader;\n\n        // changed\n        tempMat.identity();\n        tempMat.scale(tex.width, tex.height);\n        tempMat.prepend(lt);\n        tempMat.scale(1.0 / ts._width, 1.0 / ts._height);\n\n        tempMat.invert();\n        if (isSimple)\n        {\n            tempMat.prepend(uv.mapCoord);\n        }\n        else\n        {\n            shader.uniforms.uMapCoord = uv.mapCoord.toArray(true);\n            shader.uniforms.uClampFrame = uv.uClampFrame;\n            shader.uniforms.uClampOffset = uv.uClampOffset;\n        }\n\n        shader.uniforms.uTransform = tempMat.toArray(true);\n        shader.uniforms.uColor = utils.premultiplyTintToRgba(ts.tint, ts.worldAlpha,\n            shader.uniforms.uColor, baseTex.premultiplyAlpha);\n        shader.uniforms.translationMatrix = ts.transform.worldTransform.toArray(true);\n        shader.uniforms.uSampler = tex;\n\n        renderer.shader.bind(shader, false);\n        renderer.geometry.bind(quad as any, undefined);// , renderer.shader.getGLShader());\n\n        renderer.state.setBlendMode(utils.correctBlendMode(ts.blendMode, baseTex.premultiplyAlpha));\n        renderer.geometry.draw(DRAW_MODES.TRIANGLES, 6, 0);\n    }\n}\n\nRenderer.registerPlugin('tilingSprite2d', TilingSprite2dRenderer as any);\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { MaskData, systems } from '@pixi/core';\nimport { SpriteMaskFilter2d } from './SpriteMaskFilter';\n\nimport type { Sprite } from '@pixi/sprite';\n\nsystems.MaskSystem.prototype.pushSpriteMask =  function(maskData: MaskData): void {\n\tconst { maskObject } = maskData;\n\tconst target = (maskData as any)._target;\n\n\tlet alphaMaskFilter = this.alphaMaskPool[this.alphaMaskIndex];\n\n\tif (!alphaMaskFilter) {\n\t\talphaMaskFilter = this.alphaMaskPool[this.alphaMaskIndex] = [new SpriteMaskFilter2d(maskObject as Sprite)];\n\t}\n\n\talphaMaskFilter[0].resolution = this.renderer.resolution;\n\talphaMaskFilter[0].maskSprite = maskObject;\n\n\tconst stashFilterArea = target.filterArea;\n\n\ttarget.filterArea = maskObject.getBounds(true);\n\tthis.renderer.filter.push(target, alphaMaskFilter);\n\ttarget.filterArea = stashFilterArea;\n\n\tthis.alphaMaskIndex++;\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Point, ObservablePoint } from '@pixi/math';\n\nimport type { IPoint } from '@pixi/math';\n\nexport interface IPoint3d {\n\tx: number;\n\ty: number;\n\tz: number;\n}\n\nexport class Point3d extends Point {\n\tpublic z: number;\n\n\tconstructor(x?: number, y?: number, z?: number) {\n\t\tsuper(x, y);\n\t\tthis.z = z;\n\t}\n\n\tset(x?: number, y?: number, z?: number) {\n\t\tthis.x = x || 0;\n\t\tthis.y = (y === undefined) ? this.x : (y || 0);\n\t\tthis.z = (y === undefined) ? this.x : (z || 0);\n\t\treturn this;\n\t}\n\n\tcopyFrom(p: IPoint) {\n\t\tthis.set(p.x, p.y, (p as Point3d).z || 0);\n\t\treturn this;\n\t}\n\n\tcopyTo(p: Point3d) {\n\t\tp.set(this.x, this.y, this.z);\n\t\treturn p;\n\t}\n}\n\nexport class ObservablePoint3d extends ObservablePoint {\n\t_x: number;\n\t_y: number;\n\t_z: number = 0;\n\n\tscope: any;\n\tcb: any;\n\n\tget z() {\n\t\treturn this._z;\n\t}\n\n\tset z(value) {\n\t\tif (this._z !== value) {\n\t\t\tthis._z = value;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tset(x?: number, y?: number, z?: number) {\n\t\tconst _x = x || 0;\n\t\tconst _y = (y === undefined) ? _x : (y || 0);\n\t\tconst _z = (y === undefined) ? _x : (z || 0);\n\n\t\tif (this._x !== _x || this._y !== _y || this._z !== _z) {\n\t\t\tthis._x = _x;\n\t\t\tthis._y = _y;\n\t\t\tthis._z = _z;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyFrom(p: Point3d | IPoint3d | IPoint) {\n\t\tthis.set(p.x, p.y, (p as any).z || 0);\n\t\treturn this;\n\t}\n\n\tcopyTo(p: IPoint) {\n\t\t(p as Point3d).set(this._x, this._y, this._z);\n\t\treturn p;\n\t}\n}\n","// according to https://jsperf.com/obj-vs-array-view-access/1 , Float64Array is the best here\n/// <reference path=\"../types.d.ts\" />\n\nimport { AFFINE } from '../constants';\nimport { Matrix2d } from '../proj2d/Matrix2d';\nimport { Point3d } from './Point3d';\n\nimport type { IPoint3d } from './Point3d';\nimport type { Matrix } from '@pixi/math';\n\nconst mat4id = [1, 0, 0, 0,\n\t0, 1, 0, 0,\n\t0, 0, 1, 0,\n\t0, 0, 0, 1];\n\nexport class Matrix3d {\n\t/**\n\t * A default (identity) matrix\n\t *\n\t * @static\n\t * @const\n\t */\n\tstatic readonly IDENTITY = new Matrix3d();\n\n\t/**\n\t * A temp matrix\n\t *\n\t * @static\n\t * @const\n\t */\n\tstatic readonly TEMP_MATRIX = new Matrix3d();\n\n\t/**\n\t * mat4 implementation through array of 16 elements\n\t */\n\tmat4: Float64Array;\n\n\tfloatArray: Float32Array = null;\n\n\t_dirtyId: number = 0;\n\t_updateId: number = -1;\n\t_mat4inv: Float64Array = null;\n\tcacheInverse: boolean = false;\n\n\tconstructor(backingArray?: ArrayLike<number>) {\n\t\tthis.mat4 = new Float64Array(backingArray || mat4id);\n\t}\n\n\tget a() {\n\t\treturn this.mat4[0] / this.mat4[15];\n\t}\n\n\tget b() {\n\t\treturn this.mat4[1] / this.mat4[15];\n\t}\n\n\tget c() {\n\t\treturn this.mat4[4] / this.mat4[15];\n\t}\n\n\tget d() {\n\t\treturn this.mat4[5] / this.mat4[15];\n\t}\n\n\tget tx() {\n\t\treturn this.mat4[12] / this.mat4[15];\n\t}\n\n\tget ty() {\n\t\treturn this.mat4[13] / this.mat4[15];\n\t}\n\n\tset a(value: number) {\n\t\tthis.mat4[0] = value * this.mat4[15];\n\t}\n\n\tset b(value: number) {\n\t\tthis.mat4[1] = value * this.mat4[15];\n\t}\n\n\tset c(value: number) {\n\t\tthis.mat4[4] = value * this.mat4[15];\n\t}\n\n\tset d(value: number) {\n\t\tthis.mat4[5] = value * this.mat4[15];\n\t}\n\n\tset tx(value: number) {\n\t\tthis.mat4[12] = value * this.mat4[15];\n\t}\n\n\tset ty(value: number) {\n\t\tthis.mat4[13] = value * this.mat4[15];\n\t}\n\n\tset(a: number, b: number, c: number, d: number, tx: number, ty: number) {\n\t\tlet mat4 = this.mat4;\n\t\tmat4[0] = a;\n\t\tmat4[1] = b;\n\t\tmat4[2] = 0;\n\t\tmat4[3] = 0;\n\t\tmat4[4] = c;\n\t\tmat4[5] = d;\n\t\tmat4[6] = 0;\n\t\tmat4[7] = 0;\n\t\tmat4[8] = 0;\n\t\tmat4[9] = 0;\n\t\tmat4[10] = 1;\n\t\tmat4[11] = 0;\n\t\tmat4[12] = tx;\n\t\tmat4[13] = ty;\n\t\tmat4[14] = 0;\n\t\tmat4[15] = 1;\n\t\treturn this;\n\t}\n\n\ttoArray(transpose?: boolean, out?: Float32Array): Float32Array {\n\t\tif (!this.floatArray) {\n\t\t\tthis.floatArray = new Float32Array(9);\n\t\t}\n\n\t\tconst array = out || this.floatArray;\n\t\tconst mat3 = this.mat4;\n\n\t\tif (transpose) {\n\t\t\tarray[0] = mat3[0];\n\t\t\tarray[1] = mat3[1];\n\t\t\tarray[2] = mat3[3];\n\t\t\tarray[3] = mat3[4];\n\t\t\tarray[4] = mat3[5];\n\t\t\tarray[5] = mat3[7];\n\t\t\tarray[6] = mat3[12];\n\t\t\tarray[7] = mat3[13];\n\t\t\tarray[8] = mat3[15];\n\t\t}\n\t\telse {\n\t\t\t//this branch is NEVER USED in pixi\n\t\t\tarray[0] = mat3[0];\n\t\t\tarray[1] = mat3[4];\n\t\t\tarray[2] = mat3[12];\n\t\t\tarray[3] = mat3[2];\n\t\t\tarray[4] = mat3[6];\n\t\t\tarray[5] = mat3[13];\n\t\t\tarray[6] = mat3[3];\n\t\t\tarray[7] = mat3[7];\n\t\t\tarray[8] = mat3[15];\n\t\t}\n\n\t\treturn array;\n\t}\n\n\tsetToTranslation(tx: number, ty: number, tz: number) {\n\t\tconst mat4 = this.mat4;\n\n\t\tmat4[0] = 1;\n\t\tmat4[1] = 0;\n\t\tmat4[2] = 0;\n\t\tmat4[3] = 0;\n\n\t\tmat4[4] = 0;\n\t\tmat4[5] = 1;\n\t\tmat4[6] = 0;\n\t\tmat4[7] = 0;\n\n\t\tmat4[8] = 0;\n\t\tmat4[9] = 0;\n\t\tmat4[10] = 1;\n\t\tmat4[11] = 0;\n\n\t\tmat4[12] = tx;\n\t\tmat4[13] = ty;\n\t\tmat4[14] = tz;\n\t\tmat4[15] = 1;\n\t}\n\n\tsetToRotationTranslationScale(quat: Float64Array, tx: number, ty: number, tz: number, sx: number, sy: number, sz: number) {\n\t\tconst out = this.mat4;\n\n\t\tlet x = quat[0], y = quat[1], z = quat[2], w = quat[3];\n\t\tlet x2 = x + x;\n\t\tlet y2 = y + y;\n\t\tlet z2 = z + z;\n\n\t\tlet xx = x * x2;\n\t\tlet xy = x * y2;\n\t\tlet xz = x * z2;\n\t\tlet yy = y * y2;\n\t\tlet yz = y * z2;\n\t\tlet zz = z * z2;\n\t\tlet wx = w * x2;\n\t\tlet wy = w * y2;\n\t\tlet wz = w * z2;\n\n\t\tout[0] = (1 - (yy + zz)) * sx;\n\t\tout[1] = (xy + wz) * sx;\n\t\tout[2] = (xz - wy) * sx;\n\t\tout[3] = 0;\n\t\tout[4] = (xy - wz) * sy;\n\t\tout[5] = (1 - (xx + zz)) * sy;\n\t\tout[6] = (yz + wx) * sy;\n\t\tout[7] = 0;\n\t\tout[8] = (xz + wy) * sz;\n\t\tout[9] = (yz - wx) * sz;\n\t\tout[10] = (1 - (xx + yy)) * sz;\n\t\tout[11] = 0;\n\t\tout[12] = tx;\n\t\tout[13] = ty;\n\t\tout[14] = tz;\n\t\tout[15] = 1;\n\n\t\treturn out;\n\t}\n\n\tapply(pos: IPoint3d, newPos: IPoint3d): IPoint3d {\n\t\tnewPos = newPos || new Point3d();\n\n\t\tconst mat4 = this.mat4;\n\t\tconst x = pos.x;\n\t\tconst y = pos.y;\n\t\tconst z = pos.z || 0;\n\n\t\t//TODO: apply for 2d point\n\n\t\tlet w = 1.0 / (mat4[3] * x + mat4[7] * y + mat4[11] * z + mat4[15]);\n\t\tnewPos.x = w * (mat4[0] * x + mat4[4] * y + mat4[8] * z + mat4[12]);\n\t\tnewPos.y = w * (mat4[1] * x + mat4[5] * y + mat4[9] * z + mat4[13]);\n\t\tnewPos.z = w * (mat4[2] * x + mat4[6] * y + mat4[10] * z + mat4[14]);\n\n\t\treturn newPos;\n\t}\n\n\ttranslate(tx: number, ty: number, tz: number) {\n\t\tconst a = this.mat4;\n\n\t\ta[12] = a[0] * tx + a[4] * ty + a[8] * tz + a[12];\n\t\ta[13] = a[1] * tx + a[5] * ty + a[9] * tz + a[13];\n\t\ta[14] = a[2] * tx + a[6] * ty + a[10] * tz + a[14];\n\t\ta[15] = a[3] * tx + a[7] * ty + a[11] * tz + a[15];\n\n\t\treturn this;\n\t}\n\n\tscale(x: number, y: number, z?: number) {\n\t\tconst mat4 = this.mat4;\n\t\tmat4[0] *= x;\n\t\tmat4[1] *= x;\n\t\tmat4[2] *= x;\n\t\tmat4[3] *= x;\n\n\t\tmat4[4] *= y;\n\t\tmat4[5] *= y;\n\t\tmat4[6] *= y;\n\t\tmat4[7] *= y;\n\n\t\tif (z !== undefined) {\n\t\t\tmat4[8] *= z;\n\t\t\tmat4[9] *= z;\n\t\t\tmat4[10] *= z;\n\t\t\tmat4[11] *= z;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tscaleAndTranslate(scaleX: number, scaleY: number, scaleZ: number, tx: number, ty: number, tz: number) {\n\t\tconst mat4 = this.mat4;\n\t\tmat4[0] = scaleX * mat4[0] + tx * mat4[3];\n\t\tmat4[1] = scaleY * mat4[1] + ty * mat4[3];\n\t\tmat4[2] = scaleZ * mat4[2] + tz * mat4[3];\n\n\t\tmat4[4] = scaleX * mat4[4] + tx * mat4[7];\n\t\tmat4[5] = scaleY * mat4[5] + ty * mat4[7];\n\t\tmat4[6] = scaleZ * mat4[6] + tz * mat4[7];\n\n\t\tmat4[8] = scaleX * mat4[8] + tx * mat4[11];\n\t\tmat4[9] = scaleY * mat4[9] + ty * mat4[11];\n\t\tmat4[10] = scaleZ * mat4[10] + tz * mat4[11];\n\n\t\tmat4[12] = scaleX * mat4[12] + tx * mat4[15];\n\t\tmat4[13] = scaleY * mat4[13] + ty * mat4[15];\n\t\tmat4[14] = scaleZ * mat4[14] + tz * mat4[15];\n\t}\n\n\t//TODO: remove props\n\tapplyInverse(pos: IPoint3d, newPos: IPoint3d): IPoint3d {\n\t\tnewPos = newPos || new Point3d();\n\t\tif (!this._mat4inv) {\n\t\t\tthis._mat4inv = new Float64Array(16);\n\t\t}\n\n\t\tconst mat4 = this._mat4inv;\n\t\tconst a = this.mat4;\n\t\tconst x = pos.x;\n\t\tconst y = pos.y;\n\t\tlet z = pos.z || 0;\n\n\t\tif (!this.cacheInverse || this._updateId !== this._dirtyId) {\n\t\t\tthis._updateId = this._dirtyId;\n\t\t\tMatrix3d.glMatrixMat4Invert(mat4, a);\n\t\t}\n\n\t\tlet w1 = 1.0 / (mat4[3] * x + mat4[7] * y + mat4[11] * z + mat4[15]);\n\t\tconst x1 = w1 * (mat4[0] * x + mat4[4] * y + mat4[8] * z + mat4[12]);\n\t\tconst y1 = w1 * (mat4[1] * x + mat4[5] * y + mat4[9] * z + mat4[13]);\n\t\tconst z1 = w1 * (mat4[2] * x + mat4[6] * y + mat4[10] * z + mat4[14]);\n\n\t\tz += 1.0;\n\n\t\tlet w2 = 1.0 / (mat4[3] * x + mat4[7] * y + mat4[11] * z + mat4[15]);\n\t\tconst x2 = w2 * (mat4[0] * x + mat4[4] * y + mat4[8] * z + mat4[12]);\n\t\tconst y2 = w2 * (mat4[1] * x + mat4[5] * y + mat4[9] * z + mat4[13]);\n\t\tconst z2 = w2 * (mat4[2] * x + mat4[6] * y + mat4[10] * z + mat4[14]);\n\n\t\tif (Math.abs(z1-z2)<1e-10) {\n\t\t\t(newPos as Point3d).set(NaN, NaN, 0);\n\t\t}\n\n\t\tconst alpha = (0-z1) / (z2-z1);\n\t\t(newPos as Point3d).set( (x2-x1)*alpha + x1, (y2-y1)*alpha + y1, 0.0);\n\t\treturn newPos;\n\t}\n\n\tinvert(): Matrix3d {\n\t\tMatrix3d.glMatrixMat4Invert(this.mat4, this.mat4);\n\t\treturn this;\n\t}\n\n\tinvertCopyTo(matrix: Matrix3d) {\n\t\tif (!this._mat4inv) {\n\t\t\tthis._mat4inv = new Float64Array(16);\n\t\t}\n\n\t\tconst mat4 = this._mat4inv;\n\t\tconst a = this.mat4;\n\n\t\tif (!this.cacheInverse || this._updateId !== this._dirtyId) {\n\t\t\tthis._updateId = this._dirtyId;\n\t\t\tMatrix3d.glMatrixMat4Invert(mat4, a);\n\t\t}\n\n\t\tmatrix.mat4.set(mat4);\n\t}\n\n\tidentity(): Matrix3d {\n\t\tconst mat3 = this.mat4;\n\t\tmat3[0] = 1;\n\t\tmat3[1] = 0;\n\t\tmat3[2] = 0;\n\t\tmat3[3] = 0;\n\n\t\tmat3[4] = 0;\n\t\tmat3[5] = 1;\n\t\tmat3[6] = 0;\n\t\tmat3[7] = 0;\n\n\t\tmat3[8] = 0;\n\t\tmat3[9] = 0;\n\t\tmat3[10] = 1;\n\t\tmat3[11] = 0;\n\n\t\tmat3[12] = 0;\n\t\tmat3[13] = 0;\n\t\tmat3[14] = 0;\n\t\tmat3[15] = 1;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Matrix3d(this.mat4);\n\t}\n\n\tcopyTo3d(matrix: Matrix3d) {\n\t\tconst mat3 = this.mat4;\n\t\tconst ar2 = matrix.mat4;\n\t\tar2[0] = mat3[0];\n\t\tar2[1] = mat3[1];\n\t\tar2[2] = mat3[2];\n\t\tar2[3] = mat3[3];\n\t\tar2[4] = mat3[4];\n\t\tar2[5] = mat3[5];\n\t\tar2[6] = mat3[6];\n\t\tar2[7] = mat3[7];\n\t\tar2[8] = mat3[8];\n\t\treturn matrix;\n\t}\n\n\tcopyTo2d(matrix: Matrix2d) {\n\t\tconst mat3 = this.mat4;\n\t\tconst ar2 = matrix.mat3;\n\t\tar2[0] = mat3[0];\n\t\tar2[1] = mat3[1];\n\t\tar2[2] = mat3[3];\n\t\tar2[3] = mat3[4];\n\t\tar2[4] = mat3[5];\n\t\tar2[5] = mat3[7];\n\t\tar2[6] = mat3[12];\n\t\tar2[7] = mat3[13];\n\t\tar2[8] = mat3[15];\n\t\treturn matrix;\n\t}\n\n\tcopyTo2dOr3d(matrix: Matrix2d | Matrix3d) {\n\t\tif (matrix instanceof Matrix2d) {\n\t\t\treturn this.copyTo2d(matrix);\n\t\t} else {\n\t\t\treturn this.copyTo3d(matrix);\n\t\t}\n\t}\n\n\t/**\n\t * legacy method, change the values of given pixi matrix\n\t * @param matrix\n\t * @return matrix\n\t */\n\tcopyTo(matrix: Matrix, affine?: AFFINE, preserveOrientation?: boolean) {\n\t\tconst mat3 = this.mat4;\n\t\tconst d = 1.0 / mat3[15];\n\t\tconst tx = mat3[12] * d, ty = mat3[13] * d;\n\t\tmatrix.a = (mat3[0] - mat3[3] * tx) * d;\n\t\tmatrix.b = (mat3[1] - mat3[3] * ty) * d;\n\t\tmatrix.c = (mat3[4] - mat3[7] * tx) * d;\n\t\tmatrix.d = (mat3[5] - mat3[7] * ty) * d;\n\t\tmatrix.tx = tx;\n\t\tmatrix.ty = ty;\n\n\t\tif (affine >= 2) {\n\t\t\tlet D = matrix.a * matrix.d - matrix.b * matrix.c;\n\t\t\tif (!preserveOrientation) {\n\t\t\t\tD = Math.abs(D);\n\t\t\t}\n\t\t\tif (affine === AFFINE.POINT) {\n\t\t\t\tif (D > 0) {\n\t\t\t\t\tD = 1;\n\t\t\t\t} else D = -1;\n\t\t\t\tmatrix.a = D;\n\t\t\t\tmatrix.b = 0;\n\t\t\t\tmatrix.c = 0;\n\t\t\t\tmatrix.d = D;\n\t\t\t} else if (affine === AFFINE.AXIS_X) {\n\t\t\t\tD /= Math.sqrt(matrix.b * matrix.b + matrix.d * matrix.d);\n\t\t\t\tmatrix.c = 0;\n\t\t\t\tmatrix.d = D;\n\t\t\t} else if (affine === AFFINE.AXIS_Y) {\n\t\t\t\tD /= Math.sqrt(matrix.a * matrix.a + matrix.c * matrix.c);\n\t\t\t\tmatrix.a = D;\n\t\t\t\tmatrix.c = 0;\n\t\t\t}\n\t\t}\n\t\treturn matrix;\n\t}\n\n\t/**\n\t * legacy method, change the values of given pixi matrix\n\t * @param matrix\n\t * @return\n\t */\n\tcopyFrom(matrix: Matrix) {\n\t\tconst mat3 = this.mat4;\n\t\tmat3[0] = matrix.a;\n\t\tmat3[1] = matrix.b;\n\t\tmat3[2] = 0;\n\t\tmat3[3] = 0;\n\n\t\tmat3[4] = matrix.c;\n\t\tmat3[5] = matrix.d;\n\t\tmat3[6] = 0;\n\t\tmat3[7] = 0;\n\n\t\tmat3[8] = 0;\n\t\tmat3[9] = 0;\n\t\tmat3[10] = 1;\n\t\tmat3[11] = 0;\n\n\t\tmat3[12] = matrix.tx;\n\t\tmat3[13] = matrix.ty;\n\t\tmat3[14] = 0;\n\t\tmat3[15] = 1;\n\n\t\tthis._dirtyId++;\n\t\treturn this;\n\t}\n\n\tsetToMultLegacy(pt: Matrix, lt: Matrix3d) {\n\t\tconst out = this.mat4;\n\t\tconst b = lt.mat4;\n\n\t\tconst a00 = pt.a, a01 = pt.b,\n\t\t\ta10 = pt.c, a11 = pt.d,\n\t\t\ta30 = pt.tx, a31 = pt.ty;\n\n\t\tlet b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n\n\t\tout[0] = b0 * a00 + b1 * a10 + b3 * a30;\n\t\tout[1] = b0 * a01 + b1 * a11 + b3 * a31;\n\t\tout[2] = b2;\n\t\tout[3] = b3;\n\n\t\tb0 = b[4];\n\t\tb1 = b[5];\n\t\tb2 = b[6];\n\t\tb3 = b[7];\n\t\tout[4] = b0 * a00 + b1 * a10 + b3 * a30;\n\t\tout[5] = b0 * a01 + b1 * a11 + b3 * a31;\n\t\tout[6] = b2;\n\t\tout[7] = b3;\n\n\t\tb0 = b[8];\n\t\tb1 = b[9];\n\t\tb2 = b[10];\n\t\tb3 = b[11];\n\t\tout[8] = b0 * a00 + b1 * a10 + b3 * a30;\n\t\tout[9] = b0 * a01 + b1 * a11 + b3 * a31;\n\t\tout[10] = b2;\n\t\tout[11] = b3;\n\n\t\tb0 = b[12];\n\t\tb1 = b[13];\n\t\tb2 = b[14];\n\t\tb3 = b[15];\n\t\tout[12] = b0 * a00 + b1 * a10 + b3 * a30;\n\t\tout[13] = b0 * a01 + b1 * a11 + b3 * a31;\n\t\tout[14] = b2;\n\t\tout[15] = b3;\n\n\t\tthis._dirtyId++;\n\t\treturn this;\n\t}\n\n\tsetToMultLegacy2(pt: Matrix3d, lt: Matrix) {\n\t\tconst out = this.mat4;\n\t\tconst a = pt.mat4;\n\n\t\tconst a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n\t\tconst a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n\n\t\tconst b00 = lt.a, b01 = lt.b,\n\t\t\tb10 = lt.c, b11 = lt.d,\n\t\t\tb30 = lt.tx, b31 = lt.ty;\n\n\t\tout[0] = b00 * a00 + b01 * a10;\n\t\tout[1] = b00 * a01 + b01 * a11;\n\t\tout[2] = b00 * a02 + b01 * a12;\n\t\tout[3] = b00 * a03 + b01 * a13;\n\n\t\tout[4] = b10 * a00 + b11 * a10;\n\t\tout[5] = b10 * a01 + b11 * a11;\n\t\tout[6] = b10 * a02 + b11 * a12;\n\t\tout[7] = b10 * a03 + b11 * a13;\n\n\t\tout[8] = a[8];\n\t\tout[9] = a[9];\n\t\tout[10] = a[10];\n\t\tout[11] = a[11];\n\n\t\tout[12] = b30 * a00 + b31 * a10 + a[12];\n\t\tout[13] = b30 * a01 + b31 * a11 + a[13];\n\t\tout[14] = b30 * a02 + b31 * a12 + a[14];\n\t\tout[15] = b30 * a03 + b31 * a13 + a[15];\n\n\t\tthis._dirtyId++;\n\t\treturn this;\n\t}\n\n\t// that's transform multiplication we use\n\tsetToMult(pt: Matrix3d, lt: Matrix3d) {\n\t\tMatrix3d.glMatrixMat4Multiply(this.mat4, pt.mat4, lt.mat4);\n\n\t\tthis._dirtyId++;\n\t\treturn this;\n\t}\n\n\tprepend(lt: any) {\n\t\tif (lt.mat4) {\n\t\t\tthis.setToMult(lt, this);\n\t\t} else {\n\t\t\tthis.setToMultLegacy(lt, this);\n\t\t}\n\t}\n\n\tstatic glMatrixMat4Invert(out: Float64Array, a: Float64Array) {\n\t\tlet a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n\t\tlet a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n\t\tlet a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n\t\tlet a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n\t\tlet b00 = a00 * a11 - a01 * a10;\n\t\tlet b01 = a00 * a12 - a02 * a10;\n\t\tlet b02 = a00 * a13 - a03 * a10;\n\t\tlet b03 = a01 * a12 - a02 * a11;\n\t\tlet b04 = a01 * a13 - a03 * a11;\n\t\tlet b05 = a02 * a13 - a03 * a12;\n\t\tlet b06 = a20 * a31 - a21 * a30;\n\t\tlet b07 = a20 * a32 - a22 * a30;\n\t\tlet b08 = a20 * a33 - a23 * a30;\n\t\tlet b09 = a21 * a32 - a22 * a31;\n\t\tlet b10 = a21 * a33 - a23 * a31;\n\t\tlet b11 = a22 * a33 - a23 * a32;\n\n\t\t// Calculate the determinant\n\t\tlet det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n\t\tif (!det) {\n\t\t\treturn null;\n\t\t}\n\t\tdet = 1.0 / det;\n\n\t\tout[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n\t\tout[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n\t\tout[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n\t\tout[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n\t\tout[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n\t\tout[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n\t\tout[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n\t\tout[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n\t\tout[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\t\tout[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\t\tout[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\t\tout[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n\t\tout[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n\t\tout[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n\t\tout[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n\t\tout[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n\t\treturn out;\n\t}\n\n\tstatic glMatrixMat4Multiply(out: Float64Array, a: Float64Array, b: Float64Array) {\n\t\tlet a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n\t\tlet a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n\t\tlet a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n\t\tlet a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n\t\t// Cache only the current line of the second matrix\n\t\tlet b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n\t\tout[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n\t\tout[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n\t\tout[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n\t\tout[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n\t\tb0 = b[4];\n\t\tb1 = b[5];\n\t\tb2 = b[6];\n\t\tb3 = b[7];\n\t\tout[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n\t\tout[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n\t\tout[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n\t\tout[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n\t\tb0 = b[8];\n\t\tb1 = b[9];\n\t\tb2 = b[10];\n\t\tb3 = b[11];\n\t\tout[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n\t\tout[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n\t\tout[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n\t\tout[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n\t\tb0 = b[12];\n\t\tb1 = b[13];\n\t\tb2 = b[14];\n\t\tb3 = b[15];\n\t\tout[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n\t\tout[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n\t\tout[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n\t\tout[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\t\treturn out;\n\t}\n}\n","import type { IEuler } from './ObservableEuler';\n\n/**\n * The Euler angles, order is YZX. Except for projections (camera.lookEuler), its reversed XZY\n * @class\n * @namespace PIXI.projection\n * @param x pitch\n * @param y yaw\n * @param z roll\n * @constructor\n */\nexport class Euler {\n\tconstructor(x?: number, y?: number, z?: number) {\n\t\t/**\n\t\t * @member {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._x = x || 0;\n\n\t\t/**\n\t\t * @member {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._y = y || 0;\n\n\t\t/**\n\t\t * @member {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._z = z || 0;\n\n\t\tthis.quaternion = new Float64Array(4);\n\t\tthis.quaternion[3] = 1;\n\n\t\tthis.update();\n\t}\n\n\t_quatUpdateId = -1;\n\t_quatDirtyId = 0;\n\n\tquaternion: Float64Array;\n\n\t_x: number;\n\t_y: number;\n\t_z: number;\n\t_sign: number = 1;\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\n\tset x(value: number) {\n\t\tif (this._x !== value) {\n\t\t\tthis._x = value;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\n\tset y(value: number) {\n\t\tif (this._y !== value) {\n\t\t\tthis._y = value;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tget z() {\n\t\treturn this._z;\n\t}\n\n\tset z(value: number) {\n\t\tif (this._z !== value) {\n\t\t\tthis._z = value;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tget pitch() {\n\t\treturn this._x;\n\t}\n\n\tset pitch(value: number) {\n\t\tif (this._x !== value) {\n\t\t\tthis._x = value;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tget yaw() {\n\t\treturn this._y;\n\t}\n\n\tset yaw(value: number) {\n\t\tif (this._y !== value) {\n\t\t\tthis._y = value;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tget roll() {\n\t\treturn this._z;\n\t}\n\n\tset roll(value: number) {\n\t\tif (this._z !== value) {\n\t\t\tthis._z = value;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tset(x?: number, y?: number, z?: number) {\n\t\tconst _x = x || 0;\n\t\tconst _y = y || 0;\n\t\tconst _z = z || 0;\n\t\tif (this._x !== _x || this._y !== _y || this._z !== _z) {\n\t\t\tthis._x = _x;\n\t\t\tthis._y = _y;\n\t\t\tthis._z = _z;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t};\n\n\tcopyFrom(euler: IEuler) {\n\t\tconst _x = euler.x;\n\t\tconst _y = euler.y;\n\t\tconst _z = euler.z;\n\t\tif (this._x !== _x || this._y !== _y || this._z !== _z) {\n\t\t\tthis._x = _x;\n\t\t\tthis._y = _y;\n\t\t\tthis._z = _z;\n\t\t\tthis._quatDirtyId++;\n\t\t}\n\t}\n\n\tcopyTo(p: IEuler) {\n\t\tp.set(this._x, this._y, this._z);\n\t\treturn p;\n\t}\n\n\tequals(euler: IEuler) {\n\t\treturn this._x === euler.x\n\t\t\t&& this._y === euler.y\n\t\t\t&& this._z === euler.z;\n\t}\n\n\tclone() {\n\t\treturn new Euler(this._x, this._y, this._z);\n\t}\n\n\tupdate() {\n\t\tif (this._quatUpdateId === this._quatDirtyId) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._quatUpdateId = this._quatDirtyId;\n\n\t\tconst c1 = Math.cos(this._x / 2);\n\t\tconst c2 = Math.cos(this._y / 2);\n\t\tconst c3 = Math.cos(this._z / 2);\n\n\t\tconst s = this._sign;\n\t\tconst s1 = s * Math.sin(this._x / 2);\n\t\tconst s2 = s * Math.sin(this._y / 2);\n\t\tconst s3 = s * Math.sin(this._z / 2);\n\n\t\tconst q = this.quaternion;\n\n\t\tq[0] = s1 * c2 * c3 + c1 * s2 * s3;\n\t\tq[1] = c1 * s2 * c3 - s1 * c2 * s3;\n\t\tq[2] = c1 * c2 * s3 + s1 * s2 * c3;\n\t\tq[3] = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\treturn true;\n\t}\n}\n","import { Euler } from './Euler';\n\nexport type IEuler = Euler | ObservableEuler;\n\n/**\n * The Euler angles, order is YZX. Except for projections (camera.lookEuler), its reversed XZY\n * @class\n * @namespace PIXI.projection\n * @param x pitch\n * @param y yaw\n * @param z roll\n * @constructor\n */\nexport class ObservableEuler {\n\tconstructor(public cb: any, public scope: any, x?: number, y?: number, z?: number) {\n\t\t/**\n\t\t * @member {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._x = x || 0;\n\n\t\t/**\n\t\t * @member {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._y = y || 0;\n\n\t\t/**\n\t\t * @member {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._z = z || 0;\n\n\t\tthis.quaternion = new Float64Array(4);\n\t\tthis.quaternion[3] = 1;\n\n\t\tthis.update();\n\t}\n\n\t_quatUpdateId = -1;\n\t_quatDirtyId = 0;\n\n\tquaternion: Float64Array;\n\n\t_x: number;\n\t_y: number;\n\t_z: number;\n\t_sign: number = 1;\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\n\tset x(value: number) {\n\t\tif (this._x !== value) {\n\t\t\tthis._x = value;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\n\tset y(value: number) {\n\t\tif (this._y !== value) {\n\t\t\tthis._y = value;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tget z() {\n\t\treturn this._z;\n\t}\n\n\tset z(value: number) {\n\t\tif (this._z !== value) {\n\t\t\tthis._z = value;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tget pitch() {\n\t\treturn this._x;\n\t}\n\n\tset pitch(value: number) {\n\t\tif (this._x !== value) {\n\t\t\tthis._x = value;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tget yaw() {\n\t\treturn this._y;\n\t}\n\n\tset yaw(value: number) {\n\t\tif (this._y !== value) {\n\t\t\tthis._y = value;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tget roll() {\n\t\treturn this._z;\n\t}\n\n\tset roll(value: number) {\n\t\tif (this._z !== value) {\n\t\t\tthis._z = value;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tset(x?: number, y?: number, z?: number) {\n\t\tconst _x = x || 0;\n\t\tconst _y = y || 0;\n\t\tconst _z = z || 0;\n\t\tif (this._x !== _x || this._y !== _y || this._z !== _z) {\n\t\t\tthis._x = _x;\n\t\t\tthis._y = _y;\n\t\t\tthis._z = _z;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t};\n\n\tcopyFrom(euler: IEuler) {\n\t\tconst _x = euler.x;\n\t\tconst _y = euler.y;\n\t\tconst _z = euler.z;\n\t\tif (this._x !== _x || this._y !== _y || this._z !== _z) {\n\t\t\tthis._x = _x;\n\t\t\tthis._y = _y;\n\t\t\tthis._z = _z;\n\t\t\tthis._quatDirtyId++;\n\t\t\tthis.cb.call(this.scope);\n\t\t}\n\t}\n\n\tcopyTo(p: IEuler) {\n\t\tp.set(this._x, this._y, this._z);\n\t\treturn p;\n\t}\n\n\tequals(euler: IEuler) {\n\t\treturn this._x === euler.x\n\t\t\t&& this._y === euler.y\n\t\t\t&& this._z === euler.z;\n\t}\n\n\tclone() {\n\t\treturn new Euler(this._x, this._y, this._z);\n\t}\n\n\tupdate() {\n\t\tif (this._quatUpdateId === this._quatDirtyId) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._quatUpdateId = this._quatDirtyId;\n\n\t\tconst c1 = Math.cos(this._x / 2);\n\t\tconst c2 = Math.cos(this._y / 2);\n\t\tconst c3 = Math.cos(this._z / 2);\n\n\t\tconst s = this._sign;\n\t\tconst s1 = s * Math.sin(this._x / 2);\n\t\tconst s2 = s * Math.sin(this._y / 2);\n\t\tconst s3 = s * Math.sin(this._z / 2);\n\n\t\tconst q = this.quaternion;\n\n\t\tq[0] = s1 * c2 * c3 + c1 * s2 * s3;\n\t\tq[1] = c1 * s2 * c3 - s1 * c2 * s3;\n\t\tq[2] = c1 * c2 * s3 + s1 * s2 * c3;\n\t\tq[3] = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\treturn true;\n\t}\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Matrix3d } from './Matrix3d';\nimport { ObservablePoint3d } from './Point3d';\nimport { ObservableEuler } from './ObservableEuler';\nimport { LinearProjection } from '../base/LinearProjection';\n\nimport type { Matrix, Transform } from '@pixi/math';\n\nconst tempMat = new Matrix3d();\n\nexport class Projection3d extends LinearProjection<Matrix3d> {\n\n\tconstructor(legacy: Transform, enable?: boolean) {\n\t\tsuper(legacy, enable);\n\t\tthis.local = new Matrix3d();\n\t\tthis.world = new Matrix3d();\n\n\t\tthis.local.cacheInverse = true;\n\t\tthis.world.cacheInverse = true;\n\n\t\tthis.position._z = 0;\n\t\tthis.scale._z = 1;\n\t\tthis.pivot._z = 0;\n\t}\n\n\tcameraMatrix: Matrix3d = null;\n\n\t_cameraMode = false;\n\n\tget cameraMode() {\n\t\treturn this._cameraMode;\n\t}\n\n\tset cameraMode(value: boolean) {\n\t\tif (this._cameraMode === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._cameraMode = value;\n\n\t\tthis.euler._sign = this._cameraMode ? -1 : 1;\n\t\tthis.euler._quatDirtyId++;\n\n\t\tif (value) {\n\t\t\tthis.cameraMatrix = new Matrix3d();\n\t\t}\n\t}\n\n\tposition = new ObservablePoint3d(this.onChange, this, 0, 0);\n\tscale = new ObservablePoint3d(this.onChange, this, 1, 1);\n\teuler = new ObservableEuler(this.onChange, this, 0, 0, 0);\n\tpivot = new ObservablePoint3d(this.onChange, this, 0, 0);\n\n\tonChange() {\n\t\tthis._projID++;\n\t}\n\n\tclear() {\n\t\tif (this.cameraMatrix) {\n\t\t\tthis.cameraMatrix.identity();\n\t\t}\n\t\tthis.position.set(0, 0, 0);\n\t\tthis.scale.set(1, 1, 1);\n\t\tthis.euler.set(0, 0, 0);\n\t\tthis.pivot.set(0, 0, 0);\n\t\tsuper.clear();\n\t}\n\n\tupdateLocalTransform(lt: Matrix) {\n\t\tif (this._projID === 0) {\n\t\t\tthis.local.copyFrom(lt);\n\t\t\treturn;\n\t\t}\n\t\tconst matrix = this.local;\n\t\tconst euler = this.euler;\n\t\tconst pos = this.position;\n\t\tconst scale = this.scale;\n\t\tconst pivot = this.pivot;\n\n\t\teuler.update();\n\n\t\tif (!this.cameraMode) {\n\t\t\tmatrix.setToRotationTranslationScale(euler.quaternion, pos._x, pos._y, pos._z, scale._x, scale._y, scale._z);\n\t\t\tmatrix.translate(-pivot._x, -pivot._y, -pivot._z);\n\t\t\tmatrix.setToMultLegacy(lt, matrix);\n\t\t\treturn;\n\t\t}\n\n\t\tmatrix.setToMultLegacy(lt, this.cameraMatrix);\n\t\tmatrix.translate(pivot._x, pivot._y, pivot._z);\n\t\tmatrix.scale(1.0 / scale._x, 1.0 / scale._y, 1.0 / scale._z);\n\t\ttempMat.setToRotationTranslationScale(euler.quaternion, 0, 0, 0, 1, 1, 1);\n\t\tmatrix.setToMult(matrix, tempMat);\n\t\tmatrix.translate(-pos._x, -pos._y, -pos._z);\n\n\t\tthis.local._dirtyId++;\n\t}\n}\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Container } from '@pixi/display';\nimport { Point } from '@pixi/math';\nimport { Projection3d } from './Projection3d';\nimport { TRANSFORM_STEP } from '../constants';\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { IPoint } from '@pixi/math';\nimport type { IPoint3d } from './Point3d';\nimport type { IEuler } from './ObservableEuler';\n\nexport function container3dWorldTransform() {\n\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n}\n\nexport class Container3d extends Container {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.proj = new Projection3d(this.transform);\n\t}\n\n\tproj: Projection3d;\n\n\tisFrontFace(forceUpdate: boolean = false) {\n\t\tif (forceUpdate) {\n\t\t\tthis._recursivePostUpdateTransform();\n\t\t\tthis.displayObjectUpdateTransform();\n\t\t}\n\n\t\tconst mat = this.proj.world.mat4;\n\t\tconst dx1 = mat[0] * mat[15] - mat[3] * mat[12];\n\t\tconst dy1 = mat[1] * mat[15] - mat[3] * mat[13];\n\t\tconst dx2 = mat[4] * mat[15] - mat[7] * mat[12];\n\t\tconst dy2 = mat[5] * mat[15] - mat[7] * mat[13];\n\n\t\treturn dx1 * dy2 - dx2 * dy1 > 0;\n\t}\n\n\t/**\n\t * returns depth from 0 to 1\n\t *\n\t * @param {boolean} forceUpdate whether to force matrix updates\n\t * @returns {number} depth\n\t */\n\tgetDepth(forceUpdate: boolean = false) {\n\t\tif (forceUpdate) {\n\t\t\tthis._recursivePostUpdateTransform();\n\t\t\tthis.displayObjectUpdateTransform();\n\t\t}\n\n\t\tconst mat4 = this.proj.world.mat4;\n\t\treturn mat4[14] / mat4[15];\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\n\t\tif (from)\n\t\t{\n\t\t\tposition = from.toGlobal(position, point, skipUpdate);\n\t\t}\n\n\t\tif (!skipUpdate)\n\t\t{\n\t\t\tthis._recursivePostUpdateTransform();\n\t\t}\n\n\t\tif (step === TRANSFORM_STEP.ALL) {\n\t\t\tif (!skipUpdate) {\n\t\t\t\tthis.displayObjectUpdateTransform();\n\t\t\t}\n\t\t\tif (this.proj.affine) {\n\t\t\t\treturn this.transform.worldTransform.applyInverse(position as Point, point as any) as any;\n\t\t\t}\n\t\t\treturn this.proj.world.applyInverse(position as any, point as any) as any;\n\t\t}\n\n\t\tif (this.parent) {\n\t\t\tpoint  = this.parent.worldTransform.applyInverse(position as any, point as any) as any;\n\t\t} else {\n\t\t\tpoint.copyFrom(position);\n\t\t}\n\t\tif (step === TRANSFORM_STEP.NONE) {\n\t\t\treturn point;\n\t\t}\n\n\t\tpoint = this.transform.localTransform.applyInverse(point as any, point as any) as any;\n\t\tif (step === TRANSFORM_STEP.PROJ && this.proj.cameraMode) {\n\t\t\tpoint = this.proj.cameraMatrix.applyInverse(point as any, point as any) as any;\n\t\t}\n\t\treturn point;\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n\n\tget position3d(): IPoint3d {\n\t\treturn this.proj.position;\n\t}\n\tget scale3d(): IPoint {\n\t\treturn this.proj.scale;\n\t}\n\tget euler(): IEuler {\n\t\treturn this.proj.euler;\n\t}\n\tget pivot3d(): IPoint {\n\t\treturn this.proj.pivot;\n\t}\n\tset position3d(value: IPoint3d) {\n\t\tthis.proj.position.copyFrom(value);\n\t}\n\tset scale3d(value: IPoint) {\n\t\tthis.proj.scale.copyFrom(value);\n\t}\n\tset euler(value: IEuler) {\n\t\tthis.proj.euler.copyFrom(value);\n\t}\n\tset pivot3d(value: IPoint) {\n\t\tthis.proj.pivot.copyFrom(value);\n\t}\n}\n\nexport let container3dToLocal = Container3d.prototype.toLocal;\nexport let container3dGetDepth = Container3d.prototype.getDepth;\nexport let container3dIsFrontFace = Container3d.prototype.isFrontFace;\n","/// <reference path=\"../types.d.ts\" />\n\nimport { Container3d } from './Container3d';\n\nexport class Camera3d extends Container3d {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.proj.cameraMode = true;\n\t\tthis.setPlanes(400, 10, 10000, false);\n\t}\n\n\t_far: number = 0;\n\t_near: number = 0;\n\t_focus: number = 0;\n\t_orthographic: boolean = false;\n\n\tget far() {\n\t\treturn this._far;\n\t}\n\n\tget near() {\n\t\treturn this._near;\n\t}\n\n\tget focus() {\n\t\treturn this._focus;\n\t}\n\n\tget ortographic() {\n\t\treturn this._orthographic;\n\t}\n\n\tsetPlanes(focus: number, near: number = 10, far: number = 10000, orthographic: boolean = false) {\n\t\tthis._focus = focus;\n\t\tthis._near = near;\n\t\tthis._far = far;\n\t\tthis._orthographic = orthographic;\n\n\t\tconst proj = this.proj;\n\t\tconst mat4 = proj.cameraMatrix.mat4;\n\n\t\tproj._projID++;\n\n\t\tmat4[10] = 1.0 / (far - near);\n\t\tmat4[14] = (focus - near) / (far - near);\n\t\tif (this._orthographic) {\n\t\t\tmat4[11] = 0;\n\t\t} else {\n\t\t\tmat4[11] = 1.0 / focus;\n\t\t}\n\t}\n}\n\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Geometry, Program, Renderer, Shader, State, Texture } from '@pixi/core';\nimport { Projection3d } from '../Projection3d';\nimport { Mesh, MeshGeometry, MeshMaterial } from '@pixi/mesh';\nimport { Mesh2d } from '../../proj2d/mesh/Mesh2d';\nimport { TRANSFORM_STEP } from '../../constants';\nimport { \n\tcontainer3dToLocal,\n\tcontainer3dGetDepth,\n\tcontainer3dIsFrontFace\n} from '../Container3d'\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { Euler } from '../Euler';\nimport type { IPoint } from '@pixi/math';\n\nexport class Mesh3d2d extends Mesh {\n\tconstructor(geometry: Geometry, shader: Shader, state: State, drawMode?: number)\n\t{\n\t\tsuper(geometry, shader, state, drawMode);\n\t\tthis.proj = new Projection3d(this.transform);\n\t}\n\n\tvertexData2d: Float32Array = null;\n\tproj: Projection3d;\n\n\tcalculateVertices()\n\t{\n\t\tif (this.proj._affine) {\n\t\t\tthis.vertexData2d = null;\n\t\t\tsuper.calculateVertices();\n\t\t\treturn;\n\t\t}\n\n\t\tconst geometry = this.geometry as any;\n\t\tconst vertices = geometry.buffers[0].data;\n\t\tconst thisAny = this as any;\n\n\t\tif (geometry.vertexDirtyId === thisAny.vertexDirty && thisAny._transformID === thisAny.transform._worldID)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthisAny._transformID = thisAny.transform._worldID;\n\n\t\tif (thisAny.vertexData.length !== vertices.length)\n\t\t{\n\t\t\tthisAny.vertexData = new Float32Array(vertices.length);\n\t\t}\n\t\tif (!this.vertexData2d || this.vertexData2d.length  !== vertices.length * 3 / 2)\n\t\t{\n\t\t\tthis.vertexData2d = new Float32Array(vertices.length * 3);\n\t\t}\n\n\t\tconst wt = this.proj.world.mat4;\n\n\t\tconst vertexData2d = this.vertexData2d;\n\t\tconst vertexData = thisAny.vertexData;\n\n\t\tfor (let i = 0; i < vertexData.length / 2; i++)\n\t\t{\n\t\t\tconst x = vertices[(i * 2)];\n\t\t\tconst y = vertices[(i * 2) + 1];\n\n\t\t\tconst xx = (wt[0] * x) + (wt[4] * y) + wt[12];\n\t\t\tconst yy = (wt[1] * x) + (wt[5] * y) + wt[13];\n\t\t\tconst ww = (wt[3] * x) + (wt[7] * y) + wt[15];\n\n\t\t\tvertexData2d[i * 3] = xx;\n\t\t\tvertexData2d[i * 3 + 1] = yy;\n\t\t\tvertexData2d[i * 3 + 2] = ww;\n\n\t\t\tvertexData[(i * 2)] = xx / ww;\n\t\t\tvertexData[(i * 2) + 1] = yy / ww;\n\t\t}\n\n\t\tthisAny.vertexDirty = geometry.vertexDirtyId;\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\t\t\t\t\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\t\t\t\t\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\t\treturn container3dToLocal.call(this, position, from, point, skipUpdate, step);\n\t}\n\n\tisFrontFace(forceUpdate?: boolean) {\n\t\treturn container3dIsFrontFace.call(this, forceUpdate);\n\t}\n\n\tgetDepth(forceUpdate?: boolean) {\n\t\treturn container3dGetDepth.call(this, forceUpdate);\n\t}\n\n\tget position3d(): IPoint {\n\t\treturn this.proj.position;\n\t}\n\tget scale3d(): IPoint {\n\t\treturn this.proj.scale;\n\t}\n\tget euler(): Euler {\n\t\treturn this.proj.euler;\n\t}\n\tget pivot3d(): IPoint {\n\t\treturn this.proj.pivot;\n\t}\n\tset position3d(value: IPoint) {\n\t\tthis.proj.position.copyFrom(value);\n\t}\n\tset scale3d(value: IPoint) {\n\t\tthis.proj.scale.copyFrom(value);\n\t}\n\tset euler(value: Euler) {\n\t\tthis.proj.euler.copyFrom(value);\n\t}\n\tset pivot3d(value: IPoint) {\n\t\tthis.proj.pivot.copyFrom(value);\n\t}\n}\n\n(Mesh3d2d.prototype as any)._renderDefault = Mesh2d.prototype._renderDefault;\n\nexport class SimpleMesh3d2d extends Mesh3d2d {\n\tconstructor(texture: Texture, vertices?: Float32Array, uvs?: Float32Array,\n\t\t\t\tindices?: Uint16Array, drawMode?: number) {\n\t\tsuper(new MeshGeometry(vertices, uvs, indices),\n\t\t\tnew MeshMaterial(texture, {\n\t\t\t\tprogram: Program.from(Mesh2d.defaultVertexShader, Mesh2d.defaultFragmentShader),\n\t\t\t\tpluginName: 'batch2d'\n\t\t\t}),\n\t\t\tnull,\n\t\t\tdrawMode);\n\n\t\t(this.geometry.getBuffer('aVertexPosition') as any).static = false;\n\t}\n\n\tautoUpdate = true;\n\n\tget vertices()\n\t{\n\t\treturn this.geometry.getBuffer('aVertexPosition').data as Float32Array;\n\t}\n\tset vertices(value)\n\t{\n\t\tthis.geometry.getBuffer('aVertexPosition').data = value;\n\t}\n\n\tprotected _render(renderer?: Renderer)\n\t{\n\t\tif (this.autoUpdate)\n\t\t{\n\t\t\tthis.geometry.getBuffer('aVertexPosition').update();\n\t\t}\n\n\t\t(super._render as any)(renderer);\n\t}\n}\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Euler } from '../Euler';\nimport { Renderer, Texture } from '@pixi/core';\nimport { Projection3d } from '../Projection3d';\nimport { Sprite } from '@pixi/sprite';\nimport { TRANSFORM_STEP } from '../../constants';\nimport {\n\tcontainer3dToLocal,\n\tcontainer3dGetDepth,\n\tcontainer3dIsFrontFace\n} from '../Container3d';\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { IPoint } from '@pixi/math';\n\n/**\n * Same as Sprite2d, but\n * 1. uses Matrix3d in proj\n * 2. does not render if at least one vertex is behind camera\n */\nexport class Sprite3d extends Sprite {\n\tconstructor(texture: Texture) {\n\t\tsuper(texture);\n\t\tthis.proj = new Projection3d(this.transform);\n\t\tthis.pluginName = 'batch2d';\n\t}\n\n\tvertexData2d: Float32Array = null;\n\tproj: Projection3d;\n\tculledByFrustrum = false;\n\ttrimmedCulledByFrustrum = false;\n\n\tcalculateVertices() {\n\t\tconst texture = this._texture;\n\n\t\tif (this.proj._affine) {\n\t\t\tthis.vertexData2d = null;\n\t\t\tsuper.calculateVertices();\n\t\t\treturn;\n\t\t}\n\t\tif (!this.vertexData2d) {\n\t\t\tthis.vertexData2d = new Float32Array(12);\n\t\t}\n\n\t\tconst wid = (this.transform as any)._worldID;\n\t\tconst tuid = (texture as any)._updateID;\n\t\tif (this._transformID === wid && this._textureID === tuid) {\n\t\t\treturn;\n\t\t}\n\t\t// update texture UV here, because base texture can be changed without calling `_onTextureUpdate`\n\t\tif (this._textureID !== tuid) {\n\t\t\t(this as any).uvs = (texture as any)._uvs.uvsFloat32;\n\t\t}\n\n\t\tthis._transformID = wid;\n\t\tthis._textureID = tuid;\n\n\t\tconst wt = this.proj.world.mat4;\n\t\tconst vertexData2d = this.vertexData2d;\n\t\tconst vertexData = this.vertexData;\n\t\tconst trim = texture.trim;\n\t\tconst orig = texture.orig;\n\t\tconst anchor = (this._anchor as any) as { _x: number, _y: number};\n\n\t\tlet w0 = 0;\n\t\tlet w1 = 0;\n\t\tlet h0 = 0;\n\t\tlet h1 = 0;\n\n\t\tif (trim) {\n\t\t\tw1 = trim.x - (anchor._x * orig.width);\n\t\t\tw0 = w1 + trim.width;\n\n\t\t\th1 = trim.y - (anchor._y * orig.height);\n\t\t\th0 = h1 + trim.height;\n\t\t} else {\n\t\t\tw1 = -anchor._x * orig.width;\n\t\t\tw0 = w1 + orig.width;\n\n\t\t\th1 = -anchor._y * orig.height;\n\t\t\th0 = h1 + orig.height;\n\t\t}\n\n\t\tlet culled = false;\n\n\t\tlet z;\n\n\t\tvertexData2d[0] = (wt[0] * w1) + (wt[4] * h1) + wt[12];\n\t\tvertexData2d[1] = (wt[1] * w1) + (wt[5] * h1) + wt[13];\n\t\tz = (wt[2] * w1) + (wt[6] * h1) + wt[14];\n\t\tvertexData2d[2] = (wt[3] * w1) + (wt[7] * h1) + wt[15];\n\t\tculled = culled || z < 0;\n\n\t\tvertexData2d[3] = (wt[0] * w0) + (wt[4] * h1) + wt[12];\n\t\tvertexData2d[4] = (wt[1] * w0) + (wt[5] * h1) + wt[13];\n\t\tz = (wt[2] * w0) + (wt[6] * h1) + wt[14];\n\t\tvertexData2d[5] = (wt[3] * w0) + (wt[7] * h1) + wt[15];\n\t\tculled = culled || z < 0;\n\n\t\tvertexData2d[6] = (wt[0] * w0) + (wt[4] * h0) + wt[12];\n\t\tvertexData2d[7] = (wt[1] * w0) + (wt[5] * h0) + wt[13];\n\t\tz = (wt[2] * w0) + (wt[6] * h0) + wt[14];\n\t\tvertexData2d[8] = (wt[3] * w0) + (wt[7] * h0) + wt[15];\n\t\tculled = culled || z < 0;\n\n\t\tvertexData2d[9] = (wt[0] * w1) + (wt[4] * h0) + wt[12];\n\t\tvertexData2d[10] = (wt[1] * w1) + (wt[5] * h0) + wt[13];\n\t\tz = (wt[2] * w1) + (wt[6] * h0) + wt[14];\n\t\tvertexData2d[11] = (wt[3] * w1) + (wt[7] * h0) + wt[15];\n\t\tculled = culled || z < 0;\n\n\t\tthis.culledByFrustrum = culled;\n\n\t\tvertexData[0] = vertexData2d[0] / vertexData2d[2];\n\t\tvertexData[1] = vertexData2d[1] / vertexData2d[2];\n\n\t\tvertexData[2] = vertexData2d[3] / vertexData2d[5];\n\t\tvertexData[3] = vertexData2d[4] / vertexData2d[5];\n\n\t\tvertexData[4] = vertexData2d[6] / vertexData2d[8];\n\t\tvertexData[5] = vertexData2d[7] / vertexData2d[8];\n\n\t\tvertexData[6] = vertexData2d[9] / vertexData2d[11];\n\t\tvertexData[7] = vertexData2d[10] / vertexData2d[11];\n\t}\n\n\tcalculateTrimmedVertices() {\n\t\tif (this.proj._affine) {\n\t\t\tsuper.calculateTrimmedVertices();\n\t\t\treturn;\n\t\t}\n\n\t\tconst wid = (this.transform as any)._worldID;\n\t\tconst tuid = (this._texture as any)._updateID;\n\t\tif (!this.vertexTrimmedData) {\n\t\t\tthis.vertexTrimmedData = new Float32Array(8);\n\t\t} else if (this._transformTrimmedID === wid && this._textureTrimmedID === tuid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transformTrimmedID = wid;\n\t\tthis._textureTrimmedID = tuid;\n\n\t\t// lets do some special trim code!\n\t\tconst texture = this._texture;\n\t\tconst vertexData = this.vertexTrimmedData;\n\t\tconst orig = texture.orig;\n\t\tconst anchor = (this._anchor as any) as { _x: number, _y: number };\n\n\t\t// lets calculate the new untrimmed bounds..\n\t\tconst wt = this.proj.world.mat4;\n\n\t\tconst w1 = -anchor._x * orig.width;\n\t\tconst w0 = w1 + orig.width;\n\n\t\tconst h1 = -anchor._y * orig.height;\n\t\tconst h0 = h1 + orig.height;\n\n\t\tlet culled = false;\n\n\t\tlet z;\n\n\t\tlet w = 1.0 / ((wt[3] * w1) + (wt[7] * h1) + wt[15]);\n\t\tvertexData[0] = w * ((wt[0] * w1) + (wt[4] * h1) + wt[12]);\n\t\tvertexData[1] = w * ((wt[1] * w1) + (wt[5] * h1) + wt[13]);\n\t\tz = (wt[2] * w1) + (wt[6] * h1) + wt[14];\n\t\tculled = culled || z < 0;\n\n\t\tw = 1.0 / ((wt[3] * w0) + (wt[7] * h1) + wt[15]);\n\t\tvertexData[2] = w * ((wt[0] * w0) + (wt[4] * h1) + wt[12]);\n\t\tvertexData[3] = w * ((wt[1] * w0) + (wt[5] * h1) + wt[13]);\n\t\tz = (wt[2] * w0) + (wt[6] * h1) + wt[14];\n\t\tculled = culled || z < 0;\n\n\t\tw = 1.0 / ((wt[3] * w0) + (wt[7] * h0) + wt[15]);\n\t\tvertexData[4] = w * ((wt[0] * w0) + (wt[4] * h0) + wt[12]);\n\t\tvertexData[5] = w * ((wt[1] * w0) + (wt[5] * h0) + wt[13]);\n\t\tz = (wt[2] * w0) + (wt[6] * h0) + wt[14];\n\t\tculled = culled || z < 0;\n\n\t\tw = 1.0 / ((wt[3] * w1) + (wt[7] * h0) + wt[15]);\n\t\tvertexData[6] = w * ((wt[0] * w1) + (wt[4] * h0) + wt[12]);\n\t\tvertexData[7] = w * ((wt[1] * w1) + (wt[5] * h0) + wt[13]);\n\t\tz = (wt[2] * w1) + (wt[6] * h0) + wt[14];\n\t\tculled = culled || z < 0;\n\n\t\tthis.culledByFrustrum = culled;\n\t}\n\n\t_calculateBounds() {\n\t\tthis.calculateVertices();\n\t\tif (this.culledByFrustrum) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst trim = this._texture.trim;\n\t\tconst orig = this._texture.orig;\n\t\tif (!trim || (trim.width === orig.width && trim.height === orig.height))\n\t\t{\n\t\t\t// no trim! lets use the usual calculations..\n\t\t\tthis._bounds.addQuad(this.vertexData);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.calculateTrimmedVertices();\n\t\tif (!this.trimmedCulledByFrustrum) {\n\t\t\tthis._bounds.addQuad(this.vertexTrimmedData as any);\n\t\t}\n\t}\n\n\t_render(renderer: Renderer) {\n\t\tthis.calculateVertices();\n\n\t\tif (this.culledByFrustrum) {\n\t\t\treturn;\n\t\t}\n\n\t\trenderer.batch.setObjectRenderer((renderer as any).plugins[this.pluginName]);\n\t\t(renderer as any).plugins[this.pluginName].render(this);\n\t}\n\n\tcontainsPoint(point: IPoint) {\n\t\tif (this.culledByFrustrum) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn super.containsPoint(point as any);\n\t}\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\t\t\t\t\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\t\t\t\t\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\t\treturn container3dToLocal.call(this, position, from, point, skipUpdate, step);\n\t}\n\n\tisFrontFace(forceUpdate?: boolean) {\n\t\treturn container3dIsFrontFace.call(this, forceUpdate);\n\t}\n\n\tgetDepth(forceUpdate?: boolean) {\n\t\treturn container3dGetDepth.call(this, forceUpdate);\n\t}\n\n\tget position3d(): IPoint {\n\t\treturn this.proj.position;\n\t}\n\n\tget scale3d(): IPoint {\n\t\treturn this.proj.scale;\n\t}\n\n\tget euler(): Euler {\n\t\treturn this.proj.euler;\n\t}\n\n\tget pivot3d(): IPoint {\n\t\treturn this.proj.pivot;\n\t}\n\n\tset position3d(value: IPoint) {\n\t\tthis.proj.position.copyFrom(value);\n\t}\n\n\tset scale3d(value: IPoint) {\n\t\tthis.proj.scale.copyFrom(value);\n\t}\n\n\tset euler(value: Euler) {\n\t\tthis.proj.euler.copyFrom(value);\n\t}\n\n\tset pivot3d(value: IPoint) {\n\t\tthis.proj.pivot.copyFrom(value);\n\t}\n}\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Projection3d } from '../Projection3d';\nimport { Sprite3d } from './Sprite3d';\nimport { Text } from '@pixi/text';\nimport { TRANSFORM_STEP } from '../../constants';\nimport { \n\tcontainer3dToLocal,\n\tcontainer3dIsFrontFace,\n\tcontainer3dGetDepth\n} from '../Container3d';\n\nimport type { DisplayObject } from '@pixi/display';\nimport type { IEuler } from '../ObservableEuler';\nimport type { IPoint } from '@pixi/math';\nimport type { TextStyle } from '@pixi/text';\n\nexport class Text3d extends Text {\n\tconstructor(text?: string, style?: TextStyle, canvas?: HTMLCanvasElement) {\n\t\tsuper(text, style, canvas);\n\t\tthis.proj = new Projection3d(this.transform);\n\t\tthis.pluginName = 'batch2d';\n\t}\n\n\tproj: Projection3d;\n\tvertexData2d: Float32Array = null;\n\n\tget worldTransform() {\n\t\treturn this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n\t}\n\n\ttoLocal<T extends IPoint>(position: IPoint, from?: DisplayObject,\n\t\t\t\t\t\t\t\t\t\tpoint?: T, skipUpdate?: boolean,\n\t\t\t\t\t\t\t\t\t\tstep = TRANSFORM_STEP.ALL): T {\n\t\treturn container3dToLocal.call(this, position, from, point, skipUpdate, step);\n\t}\n\n\tisFrontFace(forceUpdate?: boolean) {\n\t\treturn container3dIsFrontFace.call(this, forceUpdate);\n\t}\n\n\tgetDepth(forceUpdate?: boolean) {\n\t\treturn container3dGetDepth.call(this, forceUpdate);\n\t}\n\n\tget position3d(): IPoint {\n\t\treturn this.proj.position;\n\t}\n\tget scale3d(): IPoint {\n\t\treturn this.proj.scale;\n\t}\n\tget euler(): IEuler {\n\t\treturn this.proj.euler;\n\t}\n\tget pivot3d(): IPoint {\n\t\treturn this.proj.pivot;\n\t}\n\tset position3d(value: IPoint) {\n\t\tthis.proj.position.copyFrom(value);\n\t}\n\tset scale3d(value: IPoint) {\n\t\tthis.proj.scale.copyFrom(value);\n\t}\n\tset euler(value: IEuler) {\n\t\tthis.proj.euler.copyFrom(value);\n\t}\n\tset pivot3d(value: IPoint) {\n\t\tthis.proj.pivot.copyFrom(value);\n\t}\n}\n\nText3d.prototype.calculateVertices = Sprite3d.prototype.calculateVertices;\n(Text3d.prototype as any).calculateTrimmedVertices = Sprite3d.prototype.calculateTrimmedVertices;\n(Text3d.prototype as any)._calculateBounds = Sprite3d.prototype._calculateBounds;\n(Text3d.prototype as any).containsPoint = Sprite3d.prototype.containsPoint;\n(Text3d.prototype as any)._render = Sprite3d.prototype._render;\n","/// <reference path=\"../../types.d.ts\" />\n\nimport { Container3d, container3dWorldTransform } from '../Container3d';\nimport { Mesh3d2d } from '../mesh/Mesh3d2d';\nimport { Mesh2d } from '../../proj2d/mesh/Mesh2d';\nimport { Program } from '@pixi/core';\nimport { Projection3d } from '../Projection3d';\nimport { Sprite3d } from './Sprite3d';\nimport { MeshMaterial } from '@pixi/mesh';\nimport { SimpleMesh, SimpleRope } from '@pixi/mesh-extras';\n\nconst containerProps: any = {\n\tworldTransform: {\n\t\tget: container3dWorldTransform,\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t},\n\tposition3d: {\n\t\tget: function() { return this.proj.position },\n\t\tset: function(value: any) { this.proj.position.copy(value) }\n\t},\n\tscale3d: {\n\t\tget: function() { return this.proj.scale },\n\t\tset: function(value: any) { this.proj.scale.copy(value) }\n\t},\n\tpivot3d: {\n\t\tget: function() { return this.proj.pivot },\n\t\tset: function(value: any) { this.proj.pivot.copy(value) }\n\t},\n\teuler: {\n\t\tget: function() { return this.proj.euler },\n\t\tset: function(value: any) { this.proj.euler.copy(value) }\n\t}\n};\n\nfunction convertTo3d() {\n\tif (this.proj) return;\n\tthis.proj = new Projection3d(this.transform);\n\tthis.toLocal = Container3d.prototype.toLocal;\n\tthis.isFrontFace = Container3d.prototype.isFrontFace;\n\tthis.getDepth = Container3d.prototype.getDepth;\n\tObject.defineProperties(this, containerProps);\n}\n\n(PIXI as any).Container.prototype.convertTo3d = convertTo3d;\n\n(PIXI as any).Sprite.prototype.convertTo3d = function () {\n\tif (this.proj) return;\n\tthis.calculateVertices = Sprite3d.prototype.calculateVertices;\n\tthis.calculateTrimmedVertices = Sprite3d.prototype.calculateTrimmedVertices;\n\tthis._calculateBounds = Sprite3d.prototype._calculateBounds;\n\tthis.containsPoint = Sprite3d.prototype.containsPoint;\n\tthis.pluginName = 'batch2d';\n\tconvertTo3d.call(this);\n};\n\n(PIXI as any).Container.prototype.convertSubtreeTo3d = function () {\n\tthis.convertTo3d();\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tthis.children[i].convertSubtreeTo3d();\n\t}\n};\n\nif (SimpleMesh) {\n\tSimpleMesh.prototype.convertTo3d =\n\t\tSimpleRope.prototype.convertTo3d =\n\t\t\tfunction () {\n\t\t\t\tif (this.proj) return;\n\t\t\t\tthis.calculateVertices = Mesh3d2d.prototype.calculateVertices;\n\t\t\t\tthis._renderDefault = (Mesh3d2d.prototype as any)._renderDefault;\n\t\t\t\tif (this.material.pluginName !== 'batch2d') {\n\t\t\t\t\tthis.material = new MeshMaterial(this.material.texture, {\n\t\t\t\t\t\tprogram: Program.from(Mesh2d.defaultVertexShader, Mesh2d.defaultFragmentShader),\n\t\t\t\t\t\tpluginName: 'batch2d'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconvertTo3d.call(this);\n\t\t\t};\n}\n","/// <reference types=\"pixi-spine\"/>\n/// <reference path=\"../src/types.d.ts\" />\n\nimport { Container2d, Projection2d, Sprite2d, SimpleMesh2d } from '../src';\nimport { Graphics } from '@pixi/graphics';\n\nimport type { Texture } from '@pixi/core';\n\nexport class Spine2d extends PIXI.spine.Spine {\n\tconstructor(spineData: PIXI.spine.core.SkeletonData) {\n\t\tsuper(spineData);\n\n\t\tthis.convertTo2d();\n\t}\n\n\tproj: Projection2d;\n\n\tnewContainer() {\n\t\treturn new Container2d();\n\t}\n\n\tnewSprite(tex: Texture) {\n\t\treturn new Sprite2d(tex) as any;\n\t}\n\n\tnewGraphics() {\n\t\t//TODO: make Graphics2d\n\t\treturn new Graphics();\n\t}\n\n\tnewMesh(texture: Texture, vertices?: Float32Array, uvs?: Float32Array, indices?: Uint16Array, drawMode?: number) {\n\t\treturn new SimpleMesh2d(texture, vertices, uvs, indices, drawMode) as any;\n\t}\n\n\ttransformHack() {\n\t\treturn 2;\n\t}\n}\n","/// <reference types=\"pixi-spine\"/>\n/// <reference path=\"../src/types.d.ts\" />\n\nimport { Container3d, Sprite3d, SimpleMesh3d2d } from '../src';\nimport { Graphics } from '@pixi/graphics';\n\nimport type { Texture } from '@pixi/core';\nimport type { Projection2d } from '../src';\n\nexport class Spine3d extends PIXI.spine.Spine {\n\tconstructor(spineData: PIXI.spine.core.SkeletonData) {\n\t\tsuper(spineData);\n\n\t\tthis.convertTo3d();\n\t}\n\n\tproj: Projection2d;\n\n\tnewContainer() {\n\t\treturn new Container3d();\n\t}\n\n\tnewSprite(tex: Texture) {\n\t\treturn new Sprite3d(tex) as any;\n\t}\n\n\tnewGraphics() {\n\t\t//TODO: make Graphics3d\n\t\treturn new Graphics();\n\t}\n\n\tnewMesh(texture: Texture, vertices?: Float32Array, uvs?: Float32Array, indices?: Uint16Array, drawMode?: number) {\n\t\treturn new SimpleMesh3d2d(texture, vertices, uvs, indices, drawMode) as any;\n\t}\n\n\ttransformHack() {\n\t\treturn 3;\n\t}\n}\n"],"names":["Transform","AFFINE","TRANSFORM_STEP","Buffer","TYPES","Geometry","BatchShaderGenerator","premultiplyTint","AbstractBatchRenderer","Renderer","premultiplyBlendMode","Point","Matrix","Rectangle","transformHack","Container","TextureMatrix","Sprite","Text","tempRect","tempMat","ObservablePoint","shaderVert","shaderFrag","Mesh","MeshGeometry","MeshMaterial","Program","TilingSprite","Filter","SimpleMesh","SimpleRope","QuadUv","Shader","WRAP_MODES","utils.premultiplyTintToRgba","utils.correctBlendMode","DRAW_MODES","ObjectRenderer","systems","Graphics"],"mappings":"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AE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QAEtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QAEtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QAEtD,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,YAAY,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAA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G,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QAEnD,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACV,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACV,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACX,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QACnD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QACpD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;QAEpD,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACX,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,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"}